---
layout: default
title: "PE 2.7 » Cloud Provisioning » Man » node_vmware"
subtitle: "Man Page: node_vmware"
canonical: "/pe/latest/cloudprovisioner_vmware.html"
---


<div class='mp'>
<h2 id="NAME">NAME</h2>
<p class="man-name">
  <code>puppet-node_vmware</code> - <span class="man-whatis">View and manage VMware vSphere virtual machine nodes.</span>
</p>

<h2 id="SYNOPSIS">SYNOPSIS</h2>

<p>puppet node_vmware <var>action</var></p>

<h2 id="DESCRIPTION">DESCRIPTION</h2>

<p>This subcommand provides a command line interface to work with VMware vSphere
virtual machine instances.  The goal of these actions is to easily create
new virtual machines, start and stop them, and clean up when they're no
longer required. After creating new nodes, you can use the <code>node</code>
subcommand's <code>install</code>, <code>classify</code>, and <code>init</code> actions to bring them into
your Puppet infrastructure.</p>

<p>To use this subcommand, you must include four configuration options in
your ~/.fog file:  A vCenter user account, a password, a server hostname,
and the hash digest of the vCenter server's SSL public key. (See below for
the exact names of the settings.) Puppet will display the public key
digest the first time you connect to vCenter if the setting is omitted
from the configuration file.</p>

<p>The following is an example of ~/.fog configured with an "API" access
account.</p>

<pre><code>:default:
  :vsphere_server: vcenter.example.lan
  :vsphere_username: api_user
  :vsphere_password: sekret
  :vsphere_expected_pubkey_hash: 431dd5d0412...
</code></pre>

<h2 id="OPTIONS">OPTIONS</h2>

<p>Note that any configuration parameter that's valid in the configuration
file is also a valid long argument, although it may or may not be
relevant to the present action. For example, <code>server</code> is a valid
configuration parameter, so you can specify <code>--server &lt;servername></code> as
an argument.</p>

<p>See the configuration file documentation at
<a href="http://docs.puppetlabs.com/puppet/latest/reference/configuration.html" data-bare-link="true">http://docs.puppetlabs.com/puppet/latest/reference/configuration.html</a> for the
full list of acceptable parameters. A commented list of all
configuration options can also be generated by running puppet with
<code>--genconfig</code>.</p>

<dl>
<dt>--mode MODE</dt><dd>The run mode to use for the current action. Valid modes are <code>user</code>, <code>agent</code>,
and <code>master</code>.</dd>
<dt>--render-as FORMAT</dt><dd>The format in which to render output. The most common formats are <code>json</code>,
<code>s</code> (string), <code>yaml</code>, and <code>console</code>, but other options such as <code>dot</code> are
sometimes available.</dd>
<dt>--verbose</dt><dd>Whether to log verbosely.</dd>
<dt class="flush">--debug</dt><dd>Whether to log debug information.</dd>
</dl>


<h2 id="ACTIONS">ACTIONS</h2>

<dl>
<dt><code>create</code> - Create a new VM from a template</dt><dd><p><code>SYNOPSIS</code></p>

<p>puppet node_vmware create <var>--name= | -n=</var>
<var>--template= | -t=</var>
[--wait | -w]
[--wait-for-boot | -i]
[--timeout=]</p>

<p><code>DESCRIPTION</code></p>

<p>This action creates a new virtual machine by cloning an existing VMware
VM marked as a template.</p>

<p><code>OPTIONS</code></p>

<p><var>--name=</var> | <var>-n=</var> -
The name of the new VM to create.  This name must be unique within the
folder containing the source VM or template.</p>

<p><var>--template=</var> | <var>-t=</var> -
The path of the VMware virtual machine template to clone.  A full path
to the template is expected in the same format as displayed from the
list action.</p>

<p><var>--timeout=</var> -
The maximum number of seconds to wait for API calls to complete.
Many of the API calls may take considerable time to run.  If
not specified, this defaults to 600 seconds.</p>

<p><var>--wait</var> | <var>-w</var> -
If this option is specified then Puppet will wait for the VMware copy
operation to finish.  This could be a lengthy process but provides the
ability to reliably wait until the VM has finished cloning before
moving on.</p>

<p><var>--wait-for-boot</var> | <var>-i</var> -
If this option is specified then Puppet will wait for the VMware copy
to finish and the VM to boot and obtain an IP address on the network.
This requires the VMware Tools installed in the guest VM.  This option
implies the --wait option.</p>

<p><code>RETURNS</code></p>

<p>Hash containing attributes about the new virtual machine.</p></dd>
<dt><code>find</code> - Find a VMware virtual machine</dt><dd><p><code>SYNOPSIS</code></p>

<p>puppet node_vmware find [--timeout=] <var>path</var></p>

<p><code>DESCRIPTION</code></p>

<p>Find a single VMware virtual machine by path. The default output of
the find action provides a limited set of information.  To obtain all
available attributes for a virtual machine, please use a different
rendering mode such as --render-as yaml.</p>

<p><code>OPTIONS</code></p>

<p><var>--timeout=</var> -
The maximum number of seconds to wait for API calls to complete.
Many of the API calls may take considerable time to run.  If
not specified, this defaults to 600 seconds.</p>

<p><code>RETURNS</code></p>

<p>Array of virtual machine attribute hashes.</p></dd>
<dt><code>list</code> - List VMware virtual machines</dt><dd><p><code>SYNOPSIS</code></p>

<p>puppet node_vmware list [--folder= | -f=] [--timeout=]</p>

<p><code>DESCRIPTION</code></p>

<p>List VMware virtual machines in all Datacenters.  This command may take
considerable time to run in large VMware environments.</p>

<p>The default output of the list action provides a limited set of
information.  To obtain all available attributes for each virtual
machine, please use a different rendering mode, such as --render-as yaml.</p>

<p><code>OPTIONS</code></p>

<p><var>--folder=</var> | <var>-f=</var> -
This option limits the listing of virtual machines to a single folder, which
is much faster than listing all virtual machines in the entire inventory.</p>

<p><var>--timeout=</var> -
The maximum number of seconds to wait for API calls to complete.
Many of the API calls may take considerable time to run.  If
not specified, this defaults to 600 seconds.</p>

<p><code>RETURNS</code></p>

<p>Array of virtual machine attribute hashes.</p></dd>
<dt><code>start</code> - Start a virtual machine</dt><dd><p><code>SYNOPSIS</code></p>

<p>puppet node_vmware start [--timeout=] <var>path</var></p>

<p><code>DESCRIPTION</code></p>

<p>This action starts a stopped virtual machine.  This is also known as
powering on the virtual machine.</p>

<p><code>OPTIONS</code></p>

<p><var>--timeout=</var> -
The maximum number of seconds to wait for API calls to complete.
Many of the API calls may take considerable time to run.  If
not specified, this defaults to 600 seconds.</p>

<p><code>RETURNS</code></p>

<p>Hash containing the VM's status</p></dd>
<dt><code>stop</code> - Stop a running virtual machine</dt><dd><p><code>SYNOPSIS</code></p>

<p>puppet node_vmware stop [--force] [--timeout=] <var>path</var></p>

<p><code>DESCRIPTION</code></p>

<p>This action stops a running virtual machine.  By default, the guest
operating system will be gracefully shut down using VMware Tools.</p>

<p><code>OPTIONS</code></p>

<p><var>--force</var> -
Forcibly power off the virtual machine without giving the guest
operating system a chance to gracefully shut down.</p>

<p><var>--timeout=</var> -
The maximum number of seconds to wait for API calls to complete.
Many of the API calls may take considerable time to run.  If
not specified, this defaults to 600 seconds.</p>

<p><code>RETURNS</code></p>

<p>Hash containing the VM's status</p></dd>
<dt><code>terminate</code> - Terminate (destroy) a VM</dt><dd><p><code>SYNOPSIS</code></p>

<p>puppet node_vmware terminate [--timeout=] <var>path</var></p>

<p><code>DESCRIPTION</code></p>

<p>This action terminates a virtual machine.  This is a destructive action
that will forcibly shut down a VM if it's running and then delete it from the
VMware inventory and datastore.  Only carry out this action on VMs you
want to permanently delete.  The VM hard disk images WILL BE DELETED.</p>

<p><code>OPTIONS</code></p>

<p><var>--timeout=</var> -
The maximum number of seconds to wait for API calls to complete.
Many of the API calls may take considerable time to run.  If
not specified, this defaults to 600 seconds.</p>

<p><code>RETURNS</code></p>

<p>Hash containing the VM's status</p></dd>
</dl>


<h2 id="EXAMPLES">EXAMPLES</h2>

<p><code>create</code></p>

<p>$ puppet node_vmware create --name jefftest --template /Datacenters/Solutions/vm/el56</p>

<p><code>find</code></p>

<p>Get info about a specific VM:</p>

<pre><code>$ puppet node_vmware find /Datacenters/Solutions/vm/el56
/Datacenters/Solutions/vm/el56
  powerstate: poweredOff
  name:       el56
  hostname:   --------
  instanceid: 50323f93-6835-1178-8b8f-9e2109890e1a
  ipaddress:  ---.---.---.---
  template:   true
</code></pre>

<p><code>list</code></p>

<p>List all VMs in the entire inventory:</p>

<pre><code>$ puppet node_vmware list
/Datacenters/Solutions/vm/centos5-01
  powerstate: poweredOff
  name:       centos5-01
  hostname:   centos5.example.vm
  instanceid: 503271e5-2cc4-1f1a-4303-75d33938fcf4
  ipaddress:  ---.---.---.---
  template:   false

/Datacenters/Solutions/vm/el56
  powerstate: poweredOff
  name:       el56
  hostname:   --------
  instanceid: 50323f93-6835-1178-8b8f-9e2109890e1a
  ipaddress:  ---.---.---.---
  template:   true
</code></pre>

<p>List only the VMs in the Templates folder:</p>

<pre><code>$ puppet node_vmware list --folder=/Datacenters/DC1/vm/Templates
/Datacenters/Solutions/vm/Templates/el56template
  powerstate: poweredOff
  name:       el56template
  hostname:   --------
  instanceid: 09CB9D9B-2498-41E0-807A-382408829C07
  ipaddress:  ---.---.---.---
  template:   true
</code></pre>

<p><code>start</code></p>

<p>$ puppet node_vmware start /Datacenters/MyDC/vm/jefftest</p>

<p><code>stop</code></p>

<p>$ puppet node_vmware stop /Datacenters/MyDC/vm/jefftest --force</p>

<p><code>terminate</code></p>

<p>$ puppet node_vmware terminate /Datacenters/MyDC/vm/jefftest</p>

<h2 id="COPYRIGHT-AND-LICENSE">COPYRIGHT AND LICENSE</h2>

<p>Copyright 2011 by Puppet Labs
Puppet Enterprise Software License Agreement</p>

</div>

<hr>

<p><a href="./cloudprovisioner_man_node_aws.html">Next: Man Page: puppet node_aws</a> </p>

<hr />

