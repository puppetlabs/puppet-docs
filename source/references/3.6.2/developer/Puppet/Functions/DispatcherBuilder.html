<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Puppet::Functions::DispatcherBuilder
  
    &mdash; Documentation by YARD 0.8.7.4
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../../';
  framesUrl = "../../frames.html#!Puppet/Functions/DispatcherBuilder.html";
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../../_index.html">Index (D)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../Puppet.html" title="Puppet (module)">Puppet</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Functions.html" title="Puppet::Functions (module)">Functions</a></span></span>
     &raquo; 
    <span class="title">DispatcherBuilder</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: Puppet::Functions::DispatcherBuilder
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'>Object</span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'>Object</span></li>
          
            <li class="next">Puppet::Functions::DispatcherBuilder</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/puppet/functions.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>Public api methods of the DispatcherBuilder are available within dispatch()
blocks declared in a Puppet::Function.create_function() call.</p>


  </div>
</div>
<div class="tags">
  

</div><div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="InternalDispatchBuilder.html" title="Puppet::Functions::InternalDispatchBuilder (class)">InternalDispatchBuilder</a></span></p>
</div>







  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#arg_count-instance_method" title="#arg_count (instance method)">- (Object) <strong>arg_count</strong>(min_occurs, max_occurs) </a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Specifies the min and max occurance of arguments (of the specified types) if something other than the exact count from the number of specified types). The max value may be specified as -1 if an infinite number of arguments are supported. When max is > than the number of specified types, the last specified type repeats..</p>
</div></span>
  
</li>

      
        
<li class="private ">
  <span class="summary_signature">
    
      <a href="#create_callable-instance_method" title="#create_callable (instance method)">- (Object) <strong>create_callable</strong>(types, block_type, from, to) </a>
    

    
  </span>
  
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Handles creation of a callable type from strings specifications of puppet types and allows the min/max occurs of the given types to be given as one or two integer values at the end.</p>
</div></span>
  
</li>

      
        
<li class="private ">
  <span class="summary_signature">
    
      <a href="#dispatch-instance_method" title="#dispatch (instance method)">- (Object) <strong>dispatch</strong>(meth_name, &amp;block) </a>
    

    
  </span>
  
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (DispatcherBuilder) <strong>initialize</strong>(dispatcher, type_parser, all_callables) </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>A new instance of DispatcherBuilder.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#last_captures_rest-instance_method" title="#last_captures_rest (instance method)">- (Object) <strong>last_captures_rest</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Specifies that the last argument captures the rest.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#optional_block_param-instance_method" title="#optional_block_param (instance method)">- (Object) <strong>optional_block_param</strong>(*type_and_name) </a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Defines one optional block parameter that may appear last.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#param-instance_method" title="#param (instance method)">- (Void) <strong>param</strong>(type, name) </a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Defines a positional parameter with type and name.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#required_block_param-instance_method" title="#required_block_param (instance method)">- (Object) <strong>required_block_param</strong>(*type_and_name) </a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Defines one required block parameter that may appear last.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Puppet::Functions::DispatcherBuilder (class)">DispatcherBuilder</a></span></tt>) <strong>initialize</strong>(dispatcher, type_parser, all_callables) &nbsp;<span class="private note title">private</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p>Returns a new instance of DispatcherBuilder</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


257
258
259
260
261</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/functions.rb', line 257</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_dispatcher'>dispatcher</span><span class='comma'>,</span> <span class='id identifier rubyid_type_parser'>type_parser</span><span class='comma'>,</span> <span class='id identifier rubyid_all_callables'>all_callables</span><span class='rparen'>)</span>
  <span class='ivar'>@type_parser</span> <span class='op'>=</span> <span class='id identifier rubyid_type_parser'>type_parser</span>
  <span class='ivar'>@all_callables</span> <span class='op'>=</span> <span class='id identifier rubyid_all_callables'>all_callables</span>
  <span class='ivar'>@dispatcher</span> <span class='op'>=</span> <span class='id identifier rubyid_dispatcher'>dispatcher</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="arg_count-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>arg_count</strong>(min_occurs, max_occurs) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Specifies the min and max occurance of arguments (of the specified types)
if something other than the exact count from the number of specified
types). The max value may be specified as -1 if an infinite number of
arguments are supported. When max is > than the number of specified
types, the last specified type repeats.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


337
338
339
340
341
342
343
344
345
346
347
348
349</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/functions.rb', line 337</span>

<span class='kw'>def</span> <span class='id identifier rubyid_arg_count'>arg_count</span><span class='lparen'>(</span><span class='id identifier rubyid_min_occurs'>min_occurs</span><span class='comma'>,</span> <span class='id identifier rubyid_max_occurs'>max_occurs</span><span class='rparen'>)</span>
  <span class='ivar'>@min</span> <span class='op'>=</span> <span class='id identifier rubyid_min_occurs'>min_occurs</span>
  <span class='ivar'>@max</span> <span class='op'>=</span> <span class='id identifier rubyid_max_occurs'>max_occurs</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_min_occurs'>min_occurs</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Integer</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_min_occurs'>min_occurs</span> <span class='op'>&gt;=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>min arg_count of function parameter must be an Integer &gt;=0, got </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_min_occurs'>min_occurs</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_content'> &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_min_occurs'>min_occurs</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_max_occurs'>max_occurs</span> <span class='op'>==</span> <span class='symbol'>:default</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='id identifier rubyid_max_occurs'>max_occurs</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Integer</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_max_occurs'>max_occurs</span> <span class='op'>&gt;=</span> <span class='int'>0</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>max arg_count of function parameter must be an Integer &gt;= 0, or :default, got </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_max_occurs'>max_occurs</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_content'> &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_max_occurs'>max_occurs</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_max_occurs'>max_occurs</span> <span class='op'>==</span> <span class='symbol'>:default</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='id identifier rubyid_max_occurs'>max_occurs</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Integer</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_max_occurs'>max_occurs</span> <span class='op'>&gt;=</span> <span class='id identifier rubyid_min_occurs'>min_occurs</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>max arg_count must be :default (infinite) or &gt;= min arg_count, got min: &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_min_occurs'>min_occurs</span><span class='embexpr_end'>}</span><span class='tstring_content'>, max: &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_max_occurs'>max_occurs</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_callable-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>create_callable</strong>(types, block_type, from, to)  <span class="extras">(private)</span>&nbsp;<span class="note title private">private</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p>Handles creation of a callable type from strings specifications of puppet
types and allows the min/max occurs of the given types to be given as one
or two integer values at the end.  The given block_type should be
Optional[Callable], Callable, or nil.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/functions.rb', line 386</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_callable'>create_callable</span><span class='lparen'>(</span><span class='id identifier rubyid_types'>types</span><span class='comma'>,</span> <span class='id identifier rubyid_block_type'>block_type</span><span class='comma'>,</span> <span class='id identifier rubyid_from'>from</span><span class='comma'>,</span> <span class='id identifier rubyid_to'>to</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_mapped_types'>mapped_types</span> <span class='op'>=</span> <span class='id identifier rubyid_types'>types</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_t'>t</span><span class='op'>|</span>
    <span class='ivar'>@type_parser</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_t'>t</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='op'>!</span><span class='lparen'>(</span><span class='id identifier rubyid_from'>from</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_to'>to</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_mapped_types'>mapped_types</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_from'>from</span>
    <span class='id identifier rubyid_mapped_types'>mapped_types</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_to'>to</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_block_type'>block_type</span>
    <span class='id identifier rubyid_mapped_types'>mapped_types</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_block_type'>block_type</span>
  <span class='kw'>end</span>

  <span class='const'>Puppet</span><span class='op'>::</span><span class='const'>Pops</span><span class='op'>::</span><span class='const'>Types</span><span class='op'>::</span><span class='const'>TypeFactory</span><span class='period'>.</span><span class='id identifier rubyid_callable'>callable</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_mapped_types'>mapped_types</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="dispatch-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>dispatch</strong>(meth_name, &amp;block)  <span class="extras">(private)</span>&nbsp;<span class="note title private">private</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>



  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/functions.rb', line 361</span>

<span class='kw'>def</span> <span class='id identifier rubyid_dispatch'>dispatch</span><span class='lparen'>(</span><span class='id identifier rubyid_meth_name'>meth_name</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='comment'># an array of either an index into names/types, or an array with
</span>  <span class='comment'># injection information [type, name, injection_name] used when the call
</span>  <span class='comment'># is being made to weave injections into the given arguments.
</span>  <span class='comment'>#
</span>  <span class='ivar'>@types</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@names</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@weaving</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@injections</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@min</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@max</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@last_captures</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@block_type</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@block_name</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_instance_eval'>instance_eval</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>
  <span class='id identifier rubyid_callable_t'>callable_t</span> <span class='op'>=</span> <span class='id identifier rubyid_create_callable'>create_callable</span><span class='lparen'>(</span><span class='ivar'>@types</span><span class='comma'>,</span> <span class='ivar'>@block_type</span><span class='comma'>,</span> <span class='ivar'>@min</span><span class='comma'>,</span> <span class='ivar'>@max</span><span class='rparen'>)</span>
  <span class='ivar'>@dispatcher</span><span class='period'>.</span><span class='id identifier rubyid_add_dispatch'>add_dispatch</span><span class='lparen'>(</span><span class='id identifier rubyid_callable_t'>callable_t</span><span class='comma'>,</span> <span class='id identifier rubyid_meth_name'>meth_name</span><span class='comma'>,</span> <span class='ivar'>@names</span><span class='comma'>,</span> <span class='ivar'>@block_name</span><span class='comma'>,</span> <span class='ivar'>@injections</span><span class='comma'>,</span> <span class='ivar'>@weaving</span><span class='comma'>,</span> <span class='ivar'>@last_captures</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="last_captures_rest-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>last_captures_rest</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Specifies that the last argument captures the rest.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


354
355
356</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/functions.rb', line 354</span>

<span class='kw'>def</span> <span class='id identifier rubyid_last_captures_rest'>last_captures_rest</span>
  <span class='ivar'>@last_captures</span> <span class='op'>=</span> <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="optional_block_param-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>optional_block_param</strong>(*type_and_name) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Defines one optional block parameter that may appear last. If type or name is missing the
defaults are "any callable", and the name is "block". The implementor of the dispatch target
must use block = nil when it is optional (or an error is raised when the call is made).</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


324
325
326
327
328</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/functions.rb', line 324</span>

<span class='kw'>def</span> <span class='id identifier rubyid_optional_block_param'>optional_block_param</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_type_and_name'>type_and_name</span><span class='rparen'>)</span>
  <span class='comment'># same as required, only wrap the result in an optional type
</span>  <span class='id identifier rubyid_required_block_param'>required_block_param</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_type_and_name'>type_and_name</span><span class='rparen'>)</span>
  <span class='ivar'>@block_type</span> <span class='op'>=</span> <span class='const'>Puppet</span><span class='op'>::</span><span class='const'>Pops</span><span class='op'>::</span><span class='const'>Types</span><span class='op'>::</span><span class='const'>TypeFactory</span><span class='period'>.</span><span class='id identifier rubyid_optional'>optional</span><span class='lparen'>(</span><span class='ivar'>@block_type</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="param-instance_method">
  
    - (<tt>Void</tt>) <strong>param</strong>(type, name) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Defines a positional parameter with type and name</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>type</span>
      
      
        <span class='type'>(<tt><span class='object_link'>String</span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The type specification for the parameter.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt><span class='object_link'>String</span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The name of the parameter. This is primarily used
for error message output and does not have to match the name of the
parameter on the implementation method.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Void</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


272
273
274
275
276
277
278
279
280
281</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/functions.rb', line 272</span>

<span class='kw'>def</span> <span class='id identifier rubyid_param'>param</span><span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_type'>type</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span>
    <span class='ivar'>@types</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_type'>type</span>
    <span class='ivar'>@names</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_name'>name</span>
    <span class='comment'># mark what should be picked for this position when dispatching
</span>    <span class='ivar'>@weaving</span> <span class='op'>&lt;&lt;</span> <span class='ivar'>@names</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='lparen'>(</span><span class='rparen'>)</span><span class='op'>-</span><span class='int'>1</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Type signature argument must be a String reference to a Puppet Data Type. Got </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_type'>type</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="required_block_param-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>required_block_param</strong>(*type_and_name) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Defines one required block parameter that may appear last. If type and name is missing the
default type is "Callable", and the name is "block". If only one
parameter is given, then that is the name and the type is "Callable".</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/functions.rb', line 288</span>

<span class='kw'>def</span> <span class='id identifier rubyid_required_block_param'>required_block_param</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_type_and_name'>type_and_name</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id identifier rubyid_type_and_name'>type_and_name</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
  <span class='kw'>when</span> <span class='int'>0</span>
    <span class='id identifier rubyid_type'>type</span> <span class='op'>=</span> <span class='ivar'>@all_callables</span>
    <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>block</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>when</span> <span class='int'>1</span>
    <span class='id identifier rubyid_type'>type</span> <span class='op'>=</span> <span class='ivar'>@all_callables</span>
    <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_type_and_name'>type_and_name</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
  <span class='kw'>when</span> <span class='int'>2</span>
    <span class='id identifier rubyid_type_string'>type_string</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_type_and_name'>type_and_name</span>
    <span class='id identifier rubyid_type'>type</span> <span class='op'>=</span> <span class='ivar'>@type_parser</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_type_string'>type_string</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>block_param accepts max 2 arguments (type, name), got </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_type_and_name'>type_and_name</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>unless</span> <span class='id identifier rubyid_type'>type</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Puppet</span><span class='op'>::</span><span class='const'>Pops</span><span class='op'>::</span><span class='const'>Types</span><span class='op'>::</span><span class='const'>PCallableType</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Expected PCallableType, got </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_type'>type</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>unless</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Expected block_param name to be a String, got </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='ivar'>@block_type</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='ivar'>@block_type</span> <span class='op'>=</span> <span class='id identifier rubyid_type'>type</span>
    <span class='ivar'>@block_name</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Attempt to redefine block</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Thu Jun 12 11:08:08 2014 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.4 (ruby-2.0.0).
</div>

  </body>
</html>