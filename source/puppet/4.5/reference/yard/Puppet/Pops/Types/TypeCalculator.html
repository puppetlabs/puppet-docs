<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Puppet::Pops::Types::TypeCalculator
  
    &mdash; Documentation by YARD 0.8.7.6
  
</title>

  <link rel="stylesheet" href="../../../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../../../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../../../';
  framesUrl = "../../../frames.html#!Puppet/Pops/Types/TypeCalculator.html";
</script>


  <script type="text/javascript" charset="utf-8" src="../../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../../../_index.html">Index (T)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../Puppet.html" title="Puppet (module)">Puppet</a></span></span> &raquo; <span class='title'><span class='object_link'>Pops</span></span> &raquo; <span class='title'><span class='object_link'>Types</span></span>
     &raquo; 
    <span class="title">TypeCalculator</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../../../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../../../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: Puppet::Pops::Types::TypeCalculator
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'>Object</span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'>Object</span></li>
          
            <li class="next">Puppet::Pops::Types::TypeCalculator</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/puppet/pops/types/type_calculator.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'><p>In general, new instances of the wanted type should be created as they are assigned to models using containment, and a
contained object can only be in one container at a time. Also, the type system may include more details in each type
instance, such as if it may be nil, be empty, contain a certain count etc. Or put differently, the puppet types are not
singletons.</p>
</div>
  </div>

<p>The TypeCalculator can answer questions about puppet types.</p>

<p>The Puppet type system is primarily based on sub-classing. When asking the type calculator to infer types from Ruby in general, it
may not provide the wanted answer; it does not for instance take module inclusions and extensions into account. In general the type
system should be unsurprising for anyone being exposed to the notion of type. The type <code>Data</code> may require a bit more explanation; this
is an abstract type that includes all scalar types, as well as Array with an element type compatible with Data, and Hash with key
compatible with scalar and elements compatible with Data. Expressed differently; Data is what you typically express using JSON (with
the exception that the Puppet type system also includes Pattern (regular expression) as a scalar.</p>

<h2>Inference</h2>

<p>The <code>infer(o)</code> method infers a Puppet type for scalar Ruby objects, and for Arrays and Hashes.
The inference result is instance specific for single typed collections
and allows answering questions about its embedded type. It does not however preserve multiple types in
a collection, and can thus not answer questions like <code>[1,a].infer() =~ Array[Integer, String]</code> since the inference
computes the common type Scalar when combining Integer and String.</p>

<p>The <code>infer_generic(o)</code> method infers a generic Puppet type for scalar Ruby object, Arrays and Hashes.
This inference result does not contain instance specific information; e.g. Array[Integer] where the integer
range is the generic default. Just <code>infer</code> it also combines types into a common type.</p>

<p>The <code>infer_set(o)</code> method works like <code>infer</code> but preserves all type information. It does not do any
reduction into common types or ranges. This method of inference is best suited for answering questions
about an object being an instance of a type. It correctly answers: <code>[1,a].infer_set() =~ Array[Integer, String]</code></p>

<p>The <code>generalize!(t)</code> method modifies an instance specific inference result to a generic. The method mutates
the given argument. Basically, this removes string instances from String, and range from Integer and Float.</p>

<h2>Assignability</h2>

<p>The <code>assignable?(t1, t2)</code> method answers if t2 conforms to t1. The type t2 may be an instance, in which case
its type is inferred, or a type.</p>

<h2>Instance?</h2>

<p>The <code>instance?(t, o)</code> method answers if the given object (instance) is an instance that is assignable to the given type.</p>

<h2>String</h2>

<p>Creates a string representation of a type.</p>

<h2>Creation of Type instances</h2>

<p>Instance of the classes in the <span class='object_link'>type model</span> are used to denote a specific type. It is most convenient
to use the <span class='object_link'><a href="TypeFactory.html" title="Puppet::Pops::Types::TypeFactory (module)">TypeFactory</a></span> when creating instances.</p>

<p>All types support <code>copy</code> which should be used when assigning a type where it is unknown if it is bound or not
to a parent type. A check can be made with <code>t.eContainer().nil?</code></p>

<h2>Equality and Hash</h2>

<p>Type instances are equal in terms of Ruby eql? and <code>==</code> if they describe the same type, but they are not <code>equal?</code> if they are not
the same type instance. Two types that describe the same type have identical hash - this makes them usable as hash keys.</p>

<h2>Types and Subclasses</h2>

<p>In general, the type calculator should be used to answer questions if a type is a subtype of another (using <span class='object_link'><a href="#assignable%3F-instance_method" title="Puppet::Pops::Types::TypeCalculator#assignable? (method)">#assignable?</a></span>, or
<span class='object_link'><a href="#instance%3F-instance_method" title="Puppet::Pops::Types::TypeCalculator#instance? (method)">#instance?</a></span> if the question is if a given object is an instance of a given type (or is a subtype thereof).
Many of the types also have a Ruby subtype relationship; e.g. PHashType and PArrayType are both subtypes of PCollectionType, and
PIntegerType, PFloatType, PStringType,... are subtypes of PScalarType. Even if it is possible to answer certain questions about
type by looking at the Ruby class of the types this is considered an implementation detail, and such checks should in general
be performed by the type_calculator which implements the type system semantics.</p>

<h2>The PRuntimeType</h2>

<p>The PRuntimeType corresponds to a type in the runtime system (currently only supported runtime is &#39;ruby&#39;). The
type has a runtime_type_name that corresponds to a Ruby Class name.
A Runtime[ruby] type can be used to describe any ruby class except for the puppet types that are specialized
(i.e. PRuntimeType should not be used for Integer, String, etc. since there are specialized types for those).
When the type calculator deals with PRuntimeTypes and checks for assignability, it determines the
&quot;common ancestor class&quot; of two classes.
This check is made based on the superclasses of the two classes being compared. In order to perform this, the
classes must be present (i.e. they are resolved from the string form in the PRuntimeType to a
loaded, instantiated Ruby Class). In general this is not a problem, since the question to produce the common
super type for two objects means that the classes must be present or there would have been
no instances present in the first place. If however the classes are not present, the type
calculator will fall back and state that the two types at least have Any in common.</p>

<h2>Using the Type Calculator</h2>

<p>The type calculator can be directly used via its class methods. If doing time critical work and doing many
calls to the type calculator, it is more performant to create an instance and invoke the corresponding
instance methods. Note that inference is an expensive operation, rather than inferring the same thing
several times, it is in general better to infer once and then copy the result if mutation to a more generic form is
required.</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="TypeFactory.html" title="Puppet::Pops::Types::TypeFactory (module)">for how to create instances of types</a></span></li>
    
      <li><span class='object_link'>how to construct a type instance from a String</span></li>
    
      <li><span class='object_link'>for details about the type model</span></li>
    
  </ul>

</div>






  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#assignable%3F-class_method" title="assignable? (class method)">+ (Boolean) <strong>assignable?</strong>(t1, t2) </a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#callable%3F-class_method" title="callable? (class method)">+ (Boolan) <strong>callable?</strong>(callable, args) </a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Answers, does the given callable accept the arguments given in args (an array or a tuple).</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#debug_string-class_method" title="debug_string (class method)">+ (Object) <strong>debug_string</strong>(t) </a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#enumerable-class_method" title="enumerable (class method)">+ (Object) <strong>enumerable</strong>(t) </a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#generalize-class_method" title="generalize (class method)">+ (Object) <strong>generalize</strong>(o) </a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#infer-class_method" title="infer (class method)">+ (Object) <strong>infer</strong>(o) </a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#infer_set-class_method" title="infer_set (class method)">+ (Object) <strong>infer_set</strong>(o) </a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#instance%3F-class_method" title="instance? (class method)">+ (Boolean) <strong>instance?</strong>(t, o) </a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Answers &#39;is o an instance of type t&#39;.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#is_kind_of_callable%3F-class_method" title="is_kind_of_callable? (class method)">+ (Boolean) <strong>is_kind_of_callable?</strong>(t, optional = true) </a>
    

    
  </span>
  
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#iterable-class_method" title="iterable (class method)">+ (Object) <strong>iterable</strong>(t) </a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#singleton-class_method" title="singleton (class method)">+ (TypeCalculator) <strong>singleton</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>The singleton instance.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#string-class_method" title="string (class method)">+ (String) <strong>string</strong>(t) </a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Produces a String representation of the given type.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#assignable%3F-instance_method" title="#assignable? (instance method)">- (Boolean) <strong>assignable?</strong>(t, t2) </a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Answers &#39;can an instance of type t2 be assigned to a variable of type t&#39;.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#common_type-instance_method" title="#common_type (instance method)">- (Object) <strong>common_type</strong>(t1, t2) </a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Answers, &#39;What is the common type of t1 and t2?&#39;.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#debug_string-instance_method" title="#debug_string (instance method)">- (Object) <strong>debug_string</strong>(t) </a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Produces a debug string representing the type (possibly with more information that the regular string format).</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#generalize-instance_method" title="#generalize (instance method)">- (Object) <strong>generalize</strong>(o) </a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Generalizes value specific types.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#infer-instance_method" title="#infer (instance method)">- (Object) <strong>infer</strong>(o) </a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Answers &#39;what is the single common Puppet Type describing o&#39;, or if o is an Array or Hash, what is the single common type of the elements (or keys and elements for a Hash).</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#infer_and_reduce_type-instance_method" title="#infer_and_reduce_type (instance method)">- (Object) <strong>infer_and_reduce_type</strong>(enumerable) </a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Reduce an enumerable of objects to a single common type.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#infer_Array-instance_method" title="#infer_Array (instance method)">- (Object) <strong>infer_Array</strong>(o) </a>
    

    
  </span>
  
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#infer_Closure-instance_method" title="#infer_Closure (instance method)">- (Object) <strong>infer_Closure</strong>(o) </a>
    

    
  </span>
  
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#infer_FalseClass-instance_method" title="#infer_FalseClass (instance method)">- (Object) <strong>infer_FalseClass</strong>(o) </a>
    

    
  </span>
  
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#infer_Float-instance_method" title="#infer_Float (instance method)">- (Object) <strong>infer_Float</strong>(o) </a>
    

    
  </span>
  
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#infer_Function-instance_method" title="#infer_Function (instance method)">- (Object) <strong>infer_Function</strong>(o) </a>
    

    
  </span>
  
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#infer_Hash-instance_method" title="#infer_Hash (instance method)">- (Object) <strong>infer_Hash</strong>(o) </a>
    

    
  </span>
  
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#infer_Integer-instance_method" title="#infer_Integer (instance method)">- (Object) <strong>infer_Integer</strong>(o) </a>
    

    
  </span>
  
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#infer_Iterator-instance_method" title="#infer_Iterator (instance method)">- (Object) <strong>infer_Iterator</strong>(o) </a>
    

    
  </span>
  
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#infer_Module-instance_method" title="#infer_Module (instance method)">- (Object) <strong>infer_Module</strong>(o) </a>
    

    
  </span>
  
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>The type of all modules is PType.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#infer_NilClass-instance_method" title="#infer_NilClass (instance method)">- (Object) <strong>infer_NilClass</strong>(o) </a>
    

    
  </span>
  
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#infer_Object-instance_method" title="#infer_Object (instance method)">- (Object) <strong>infer_Object</strong>(o) </a>
    

    
  </span>
  
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#infer_PAnyType-instance_method" title="#infer_PAnyType (instance method)">- (Object) <strong>infer_PAnyType</strong>(o) </a>
    

    
  </span>
  
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>The type of all types is PType.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#infer_Proc-instance_method" title="#infer_Proc (instance method)">- (Object) <strong>infer_Proc</strong>(o) </a>
    

    
  </span>
  
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#infer_PType-instance_method" title="#infer_PType (instance method)">- (Object) <strong>infer_PType</strong>(o) </a>
    

    
  </span>
  
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>The type of all types is PType This is the metatype short circuit.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#infer_PuppetProc-instance_method" title="#infer_PuppetProc (instance method)">- (Object) <strong>infer_PuppetProc</strong>(o) </a>
    

    
  </span>
  
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#infer_Regexp-instance_method" title="#infer_Regexp (instance method)">- (Object) <strong>infer_Regexp</strong>(o) </a>
    

    
  </span>
  
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#infer_Resource-instance_method" title="#infer_Resource (instance method)">- (Object) <strong>infer_Resource</strong>(o) </a>
    

    
  </span>
  
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>A Puppet::Parser::Resource, or Puppet::Resource.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#infer_set-instance_method" title="#infer_set (instance method)">- (Object) <strong>infer_set</strong>(o) </a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Answers &#39;what is the set of Puppet Types of o&#39;.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#infer_String-instance_method" title="#infer_String (instance method)">- (Object) <strong>infer_String</strong>(o) </a>
    

    
  </span>
  
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#infer_Symbol-instance_method" title="#infer_Symbol (instance method)">- (Object) <strong>infer_Symbol</strong>(o) </a>
    

    
  </span>
  
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>Inference of :default as PDefaultType, and all other are Ruby[Symbol].</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#infer_TrueClass-instance_method" title="#infer_TrueClass (instance method)">- (Object) <strong>infer_TrueClass</strong>(o) </a>
    

    
  </span>
  
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (TypeCalculator) <strong>initialize</strong> </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>A new instance of TypeCalculator.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#injectable_class-instance_method" title="#injectable_class (instance method)">- (Class<sup>?</sup>) <strong>injectable_class</strong>(klazz) </a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Answers the question &#39;is it possible to inject an instance of the given class&#39; A class is injectable if it has a special <em>assisted inject</em> class method called <code>inject</code> taking an injector and a scope as argument, or if it has a zero args <code>initialize</code> method.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#instance%3F-instance_method" title="#instance? (instance method)">- (Boolean) <strong>instance?</strong>(t, o) </a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Answers &#39;is o an instance of type t&#39;.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#is_pnil%3F-instance_method" title="#is_pnil? (instance method)">- (Boolean) <strong>is_pnil?</strong>(t) </a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Answers if t represents the puppet type PUndefType.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#is_ptype%3F-instance_method" title="#is_ptype? (instance method)">- (Boolean) <strong>is_ptype?</strong>(t) </a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Answers if t is a puppet type.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#reduce_type-instance_method" title="#reduce_type (instance method)">- (Object) <strong>reduce_type</strong>(enumerable) </a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Reduces an enumerable of types to a single common type.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#string-instance_method" title="#string (instance method)">- (Object) <strong>string</strong>(t) </a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Produces a string representing the type.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#tuple_entry_at-instance_method" title="#tuple_entry_at (instance method)">- (Object) <strong>tuple_entry_at</strong>(tuple_t, from, to, index) </a>
    

    
  </span>
  
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>Produces the tuple entry at the given index given a tuple type, its from/to constraints on the last type, and an index.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#type-instance_method" title="#type (instance method)">- (Object) <strong>type</strong>(c) </a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Answers &#39;what is the Puppet Type corresponding to the given Ruby class&#39;.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Puppet::Pops::Types::TypeCalculator (class)">TypeCalculator</a></span></tt>) <strong>initialize</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns a new instance of TypeCalculator</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


170
171
172
173</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 170</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>
  <span class='cvar'>@@infer_visitor</span> <span class='op'>||=</span> <span class='const'>Visitor</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>infer</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span><span class='int'>0</span><span class='comma'>,</span><span class='int'>0</span><span class='rparen'>)</span>
  <span class='cvar'>@@extract_visitor</span> <span class='op'>||=</span> <span class='const'>Visitor</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>extract</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span><span class='int'>0</span><span class='comma'>,</span><span class='int'>0</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="assignable?-class_method">
  
    + (<tt>Boolean</tt>) <strong>assignable?</strong>(t1, t2) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


104
105
106</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 104</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_assignable?'>assignable?</span><span class='lparen'>(</span><span class='id identifier rubyid_t1'>t1</span><span class='comma'>,</span> <span class='id identifier rubyid_t2'>t2</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_singleton'>singleton</span><span class='period'>.</span><span class='id identifier rubyid_assignable?'>assignable?</span><span class='lparen'>(</span><span class='id identifier rubyid_t1'>t1</span><span class='comma'>,</span><span class='id identifier rubyid_t2'>t2</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="callable?-class_method">
  
    + (<tt>Boolan</tt>) <strong>callable?</strong>(callable, args) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Answers, does the given callable accept the arguments given in args (an array or a tuple)</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>callable</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="PCallableType.html" title="Puppet::Pops::Types::PCallableType (class)">PCallableType</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><ul>
<li>the callable</li>
</ul>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>args</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="PArrayType.html" title="Puppet::Pops::Types::PArrayType (class)">PArrayType</a></span></tt>, <tt><span class='object_link'><a href="PTupleType.html" title="Puppet::Pops::Types::PTupleType (class)">PTupleType</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>args optionally including a lambda callable at the end</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolan</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>true if the callable accepts the arguments</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


114
115
116</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 114</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_callable?'>callable?</span><span class='lparen'>(</span><span class='id identifier rubyid_callable'>callable</span><span class='comma'>,</span> <span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_singleton'>singleton</span><span class='period'>.</span><span class='id identifier rubyid_callable?'>callable?</span><span class='lparen'>(</span><span class='id identifier rubyid_callable'>callable</span><span class='comma'>,</span> <span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="debug_string-class_method">
  
    + (<tt><span class='object_link'>Object</span></tt>) <strong>debug_string</strong>(t) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


145
146
147
148</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 145</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_debug_string'>debug_string</span><span class='lparen'>(</span><span class='id identifier rubyid_t'>t</span><span class='rparen'>)</span>
  <span class='const'>Puppet</span><span class='period'>.</span><span class='id identifier rubyid_deprecation_warning'>deprecation_warning</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>TypeCalculator.debug_string is deprecated. Use TypeFormatter</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='const'>TypeFormatter</span><span class='period'>.</span><span class='id identifier rubyid_debug_string'>debug_string</span><span class='lparen'>(</span><span class='id identifier rubyid_t'>t</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="enumerable-class_method">
  
    + (<tt><span class='object_link'>Object</span></tt>) <strong>enumerable</strong>(t) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


151
152
153
154</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 151</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_enumerable'>enumerable</span><span class='lparen'>(</span><span class='id identifier rubyid_t'>t</span><span class='rparen'>)</span>
  <span class='const'>Puppet</span><span class='period'>.</span><span class='id identifier rubyid_deprecation_warning'>deprecation_warning</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>TypeCalculator.enumerable is deprecated. Use iterable</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_singleton'>singleton</span><span class='period'>.</span><span class='id identifier rubyid_iterable'>iterable</span><span class='lparen'>(</span><span class='id identifier rubyid_t'>t</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="generalize-class_method">
  
    + (<tt><span class='object_link'>Object</span></tt>) <strong>generalize</strong>(o) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


135
136
137</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 135</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_generalize'>generalize</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_singleton'>singleton</span><span class='period'>.</span><span class='id identifier rubyid_generalize'>generalize</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="infer-class_method">
  
    + (<tt><span class='object_link'>Object</span></tt>) <strong>infer</strong>(o) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


130
131
132</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 130</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_infer'>infer</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_singleton'>singleton</span><span class='period'>.</span><span class='id identifier rubyid_infer'>infer</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="infer_set-class_method">
  
    + (<tt><span class='object_link'>Object</span></tt>) <strong>infer_set</strong>(o) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


140
141
142</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 140</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_infer_set'>infer_set</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_singleton'>singleton</span><span class='period'>.</span><span class='id identifier rubyid_infer_set'>infer_set</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="instance?-class_method">
  
    + (<tt>Boolean</tt>) <strong>instance?</strong>(t, o) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Answers &#39;is o an instance of type t&#39;</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


323
324
325</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 323</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_instance?'>instance?</span><span class='lparen'>(</span><span class='id identifier rubyid_t'>t</span><span class='comma'>,</span> <span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_singleton'>singleton</span><span class='period'>.</span><span class='id identifier rubyid_instance?'>instance?</span><span class='lparen'>(</span><span class='id identifier rubyid_t'>t</span><span class='comma'>,</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_kind_of_callable?-class_method">
  
    + (<tt>Boolean</tt>) <strong>is_kind_of_callable?</strong>(t, optional = true) &nbsp;<span class="private note title">private</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


731
732
733</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 731</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_is_kind_of_callable?'>is_kind_of_callable?</span><span class='lparen'>(</span><span class='id identifier rubyid_t'>t</span><span class='comma'>,</span> <span class='id identifier rubyid_optional'>optional</span> <span class='op'>=</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>PAnyType</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_kind_of_callable?'>kind_of_callable?</span><span class='lparen'>(</span><span class='id identifier rubyid_optional'>optional</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="iterable-class_method">
  
    + (<tt><span class='object_link'>Object</span></tt>) <strong>iterable</strong>(t) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


157
158
159</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 157</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_iterable'>iterable</span><span class='lparen'>(</span><span class='id identifier rubyid_t'>t</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_singleton'>singleton</span><span class='period'>.</span><span class='id identifier rubyid_iterable'>iterable</span><span class='lparen'>(</span><span class='id identifier rubyid_t'>t</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="singleton-class_method">
  
    + (<tt><span class='object_link'><a href="" title="Puppet::Pops::Types::TypeCalculator (class)">TypeCalculator</a></span></tt>) <strong>singleton</strong> &nbsp;<span class="private note title">private</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p>Returns the singleton instance</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Puppet::Pops::Types::TypeCalculator (class)">TypeCalculator</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the singleton instance</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


164
165
166</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 164</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_singleton'>singleton</span>
  <span class='ivar'>@tc_instance</span> <span class='op'>||=</span> <span class='id identifier rubyid_new'>new</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="string-class_method">
  
    + (<tt>String</tt>) <strong>string</strong>(t) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Produces a String representation of the given type.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>t</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="PAnyType.html" title="Puppet::Pops::Types::PAnyType (class)">PAnyType</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the type to produce a string form</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the type in string form</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


124
125
126
127</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 124</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span><span class='lparen'>(</span><span class='id identifier rubyid_t'>t</span><span class='rparen'>)</span>
  <span class='const'>Puppet</span><span class='period'>.</span><span class='id identifier rubyid_deprecation_warning'>deprecation_warning</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>TypeCalculator.string is deprecated. Use TypeFormatter</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='const'>TypeFormatter</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span><span class='lparen'>(</span><span class='id identifier rubyid_t'>t</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="assignable?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>assignable?</strong>(t, t2) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Answers &#39;can an instance of type t2 be assigned to a variable of type t&#39;.
Does not accept nil/undef unless the type accepts it.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


203
204
205
206
207
208</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 203</span>

<span class='kw'>def</span> <span class='id identifier rubyid_assignable?'>assignable?</span><span class='lparen'>(</span><span class='id identifier rubyid_t'>t</span><span class='comma'>,</span> <span class='id identifier rubyid_t2'>t2</span><span class='rparen'>)</span>
   <span class='kw'>if</span> <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Module</span><span class='rparen'>)</span>
     <span class='id identifier rubyid_t'>t</span> <span class='op'>=</span> <span class='id identifier rubyid_type'>type</span><span class='lparen'>(</span><span class='id identifier rubyid_t'>t</span><span class='rparen'>)</span>
   <span class='kw'>end</span>
   <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>PAnyType</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_assignable?'>assignable?</span><span class='lparen'>(</span><span class='id identifier rubyid_t2'>t2</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="common_type-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>common_type</strong>(t1, t2) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Answers, &#39;What is the common type of t1 and t2?&#39;</p>

<p>TODO: The current implementation should be optimized for performance</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 357</span>

<span class='kw'>def</span> <span class='id identifier rubyid_common_type'>common_type</span><span class='lparen'>(</span><span class='id identifier rubyid_t1'>t1</span><span class='comma'>,</span> <span class='id identifier rubyid_t2'>t2</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>two types expected</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>unless</span> <span class='lparen'>(</span><span class='id identifier rubyid_is_ptype?'>is_ptype?</span><span class='lparen'>(</span><span class='id identifier rubyid_t1'>t1</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_is_pnil?'>is_pnil?</span><span class='lparen'>(</span><span class='id identifier rubyid_t1'>t1</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_is_ptype?'>is_ptype?</span><span class='lparen'>(</span><span class='id identifier rubyid_t2'>t2</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_is_pnil?'>is_pnil?</span><span class='lparen'>(</span><span class='id identifier rubyid_t2'>t2</span><span class='rparen'>)</span><span class='rparen'>)</span>

  <span class='comment'># TODO: This is not right since Scalar U Undef is Any
</span>  <span class='comment'># if either is nil, the common type is the other
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_is_pnil?'>is_pnil?</span><span class='lparen'>(</span><span class='id identifier rubyid_t1'>t1</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_t2'>t2</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_is_pnil?'>is_pnil?</span><span class='lparen'>(</span><span class='id identifier rubyid_t2'>t2</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_t1'>t1</span>
  <span class='kw'>end</span>

  <span class='comment'># If either side is Unit, it is the other type
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_t1'>t1</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>PUnitType</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_t2'>t2</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_t2'>t2</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>PUnitType</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_t1'>t1</span>
  <span class='kw'>end</span>

  <span class='comment'># Simple case, one is assignable to the other
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_assignable?'>assignable?</span><span class='lparen'>(</span><span class='id identifier rubyid_t1'>t1</span><span class='comma'>,</span> <span class='id identifier rubyid_t2'>t2</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_t1'>t1</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_assignable?'>assignable?</span><span class='lparen'>(</span><span class='id identifier rubyid_t2'>t2</span><span class='comma'>,</span> <span class='id identifier rubyid_t1'>t1</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_t2'>t2</span>
  <span class='kw'>end</span>

  <span class='comment'># when both are arrays, return an array with common element type
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_t1'>t1</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>PArrayType</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_t2'>t2</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>PArrayType</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='const'>PArrayType</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_common_type'>common_type</span><span class='lparen'>(</span><span class='id identifier rubyid_t1'>t1</span><span class='period'>.</span><span class='id identifier rubyid_element_type'>element_type</span><span class='comma'>,</span> <span class='id identifier rubyid_t2'>t2</span><span class='period'>.</span><span class='id identifier rubyid_element_type'>element_type</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># when both are hashes, return a hash with common key- and element type
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_t1'>t1</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>PHashType</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_t2'>t2</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>PHashType</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_key_type'>key_type</span> <span class='op'>=</span> <span class='id identifier rubyid_common_type'>common_type</span><span class='lparen'>(</span><span class='id identifier rubyid_t1'>t1</span><span class='period'>.</span><span class='id identifier rubyid_key_type'>key_type</span><span class='comma'>,</span> <span class='id identifier rubyid_t2'>t2</span><span class='period'>.</span><span class='id identifier rubyid_key_type'>key_type</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_element_type'>element_type</span> <span class='op'>=</span> <span class='id identifier rubyid_common_type'>common_type</span><span class='lparen'>(</span><span class='id identifier rubyid_t1'>t1</span><span class='period'>.</span><span class='id identifier rubyid_element_type'>element_type</span><span class='comma'>,</span> <span class='id identifier rubyid_t2'>t2</span><span class='period'>.</span><span class='id identifier rubyid_element_type'>element_type</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='const'>PHashType</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_key_type'>key_type</span><span class='comma'>,</span> <span class='id identifier rubyid_element_type'>element_type</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># when both are host-classes, reduce to PHostClass[] (since one was not assignable to the other)
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_t1'>t1</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>PHostClassType</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_t2'>t2</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>PHostClassType</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='const'>PHostClassType</span><span class='op'>::</span><span class='const'>DEFAULT</span>
  <span class='kw'>end</span>

  <span class='comment'># when both are resources, reduce to Resource[T] or Resource[] (since one was not assignable to the other)
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_t1'>t1</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>PResourceType</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_t2'>t2</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>PResourceType</span><span class='rparen'>)</span>
    <span class='comment'># only Resource[] unless the type name is the same
</span>    <span class='kw'>return</span> <span class='id identifier rubyid_t1'>t1</span><span class='period'>.</span><span class='id identifier rubyid_type_name'>type_name</span> <span class='op'>==</span> <span class='id identifier rubyid_t2'>t2</span><span class='period'>.</span><span class='id identifier rubyid_type_name'>type_name</span> <span class='op'>?</span>  <span class='const'>PResourceType</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_t1'>t1</span><span class='period'>.</span><span class='id identifier rubyid_type_name'>type_name</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='const'>PResourceType</span><span class='op'>::</span><span class='const'>DEFAULT</span>
  <span class='kw'>end</span>

  <span class='comment'># Integers have range, expand the range to the common range
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_t1'>t1</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>PIntegerType</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_t2'>t2</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>PIntegerType</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='const'>PIntegerType</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='id identifier rubyid_t1'>t1</span><span class='period'>.</span><span class='id identifier rubyid_numeric_from'>numeric_from</span><span class='comma'>,</span> <span class='id identifier rubyid_t2'>t2</span><span class='period'>.</span><span class='id identifier rubyid_numeric_from'>numeric_from</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_min'>min</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='id identifier rubyid_t1'>t1</span><span class='period'>.</span><span class='id identifier rubyid_numeric_to'>numeric_to</span><span class='comma'>,</span> <span class='id identifier rubyid_t2'>t2</span><span class='period'>.</span><span class='id identifier rubyid_numeric_to'>numeric_to</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_max'>max</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># Floats have range, expand the range to the common range
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_t1'>t1</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>PFloatType</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_t2'>t2</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>PFloatType</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='const'>PFloatType</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='id identifier rubyid_t1'>t1</span><span class='period'>.</span><span class='id identifier rubyid_numeric_from'>numeric_from</span><span class='comma'>,</span> <span class='id identifier rubyid_t2'>t2</span><span class='period'>.</span><span class='id identifier rubyid_numeric_from'>numeric_from</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_min'>min</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='id identifier rubyid_t1'>t1</span><span class='period'>.</span><span class='id identifier rubyid_numeric_to'>numeric_to</span><span class='comma'>,</span> <span class='id identifier rubyid_t2'>t2</span><span class='period'>.</span><span class='id identifier rubyid_numeric_to'>numeric_to</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_max'>max</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_t1'>t1</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>PStringType</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_t2'>t2</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>PStringType</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_common_size_type'>common_size_type</span> <span class='op'>=</span> <span class='id identifier rubyid_common_type'>common_type</span><span class='lparen'>(</span><span class='id identifier rubyid_t1'>t1</span><span class='period'>.</span><span class='id identifier rubyid_size_type'>size_type</span><span class='comma'>,</span> <span class='id identifier rubyid_t2'>t2</span><span class='period'>.</span><span class='id identifier rubyid_size_type'>size_type</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_t1'>t1</span><span class='period'>.</span><span class='id identifier rubyid_size_type'>size_type</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_t2'>t2</span><span class='period'>.</span><span class='id identifier rubyid_size_type'>size_type</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_common_strings'>common_strings</span> <span class='op'>=</span> <span class='id identifier rubyid_t1'>t1</span><span class='period'>.</span><span class='id identifier rubyid_values'>values</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='op'>||</span> <span class='id identifier rubyid_t2'>t2</span><span class='period'>.</span><span class='id identifier rubyid_values'>values</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='op'>?</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='op'>:</span> <span class='id identifier rubyid_t1'>t1</span><span class='period'>.</span><span class='id identifier rubyid_values'>values</span> <span class='op'>|</span> <span class='id identifier rubyid_t2'>t2</span><span class='period'>.</span><span class='id identifier rubyid_values'>values</span>
    <span class='kw'>return</span> <span class='const'>PStringType</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_common_size_type'>common_size_type</span><span class='comma'>,</span> <span class='id identifier rubyid_common_strings'>common_strings</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_t1'>t1</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>PPatternType</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_t2'>t2</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>PPatternType</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='const'>PPatternType</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_t1'>t1</span><span class='period'>.</span><span class='id identifier rubyid_patterns'>patterns</span> <span class='op'>|</span> <span class='id identifier rubyid_t2'>t2</span><span class='period'>.</span><span class='id identifier rubyid_patterns'>patterns</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_t1'>t1</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>PEnumType</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_t2'>t2</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>PEnumType</span><span class='rparen'>)</span>
    <span class='comment'># The common type is one that complies with either set
</span>    <span class='kw'>return</span> <span class='const'>PEnumType</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_t1'>t1</span><span class='period'>.</span><span class='id identifier rubyid_values'>values</span> <span class='op'>|</span> <span class='id identifier rubyid_t2'>t2</span><span class='period'>.</span><span class='id identifier rubyid_values'>values</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_t1'>t1</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>PVariantType</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_t2'>t2</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>PVariantType</span><span class='rparen'>)</span>
    <span class='comment'># The common type is one that complies with either set
</span>    <span class='kw'>return</span> <span class='const'>PVariantType</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_t1'>t1</span><span class='period'>.</span><span class='id identifier rubyid_types'>types</span> <span class='op'>|</span> <span class='id identifier rubyid_t2'>t2</span><span class='period'>.</span><span class='id identifier rubyid_types'>types</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_t1'>t1</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>PRegexpType</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_t2'>t2</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>PRegexpType</span><span class='rparen'>)</span>
    <span class='comment'># if they were identical, the general rule would return a parameterized regexp
</span>    <span class='comment'># since they were not, the result is a generic regexp type
</span>    <span class='kw'>return</span> <span class='const'>PPatternType</span><span class='op'>::</span><span class='const'>DEFAULT</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_t1'>t1</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>PCallableType</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_t2'>t2</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>PCallableType</span><span class='rparen'>)</span>
    <span class='comment'># They do not have the same signature, and one is not assignable to the other,
</span>    <span class='comment'># what remains is the most general form of Callable
</span>    <span class='kw'>return</span> <span class='const'>PCallableType</span><span class='op'>::</span><span class='const'>DEFAULT</span>
  <span class='kw'>end</span>

  <span class='comment'># Common abstract types, from most specific to most general
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_common_numeric?'>common_numeric?</span><span class='lparen'>(</span><span class='id identifier rubyid_t1'>t1</span><span class='comma'>,</span> <span class='id identifier rubyid_t2'>t2</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='const'>PNumericType</span><span class='op'>::</span><span class='const'>DEFAULT</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_common_scalar?'>common_scalar?</span><span class='lparen'>(</span><span class='id identifier rubyid_t1'>t1</span><span class='comma'>,</span> <span class='id identifier rubyid_t2'>t2</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='const'>PScalarType</span><span class='op'>::</span><span class='const'>DEFAULT</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_common_data?'>common_data?</span><span class='lparen'>(</span><span class='id identifier rubyid_t1'>t1</span><span class='comma'>,</span><span class='id identifier rubyid_t2'>t2</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='const'>PDataType</span><span class='op'>::</span><span class='const'>DEFAULT</span>
  <span class='kw'>end</span>

  <span class='comment'># Meta types Type[Integer] + Type[String] =&gt; Type[Data]
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_t1'>t1</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>PType</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_t2'>t2</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>PType</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='const'>PType</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_common_type'>common_type</span><span class='lparen'>(</span><span class='id identifier rubyid_t1'>t1</span><span class='period'>.</span><span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_t2'>t2</span><span class='period'>.</span><span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># If both are Runtime types
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_t1'>t1</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>PRuntimeType</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_t2'>t2</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>PRuntimeType</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_t1'>t1</span><span class='period'>.</span><span class='id identifier rubyid_runtime'>runtime</span> <span class='op'>==</span> <span class='id identifier rubyid_t2'>t2</span><span class='period'>.</span><span class='id identifier rubyid_runtime'>runtime</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_t1'>t1</span><span class='period'>.</span><span class='id identifier rubyid_runtime_type_name'>runtime_type_name</span> <span class='op'>==</span> <span class='id identifier rubyid_t2'>t2</span><span class='period'>.</span><span class='id identifier rubyid_runtime_type_name'>runtime_type_name</span>
      <span class='kw'>return</span> <span class='id identifier rubyid_t1'>t1</span>
    <span class='kw'>end</span>
    <span class='comment'># finding the common super class requires that names are resolved to class
</span>    <span class='comment'># NOTE: This only supports runtime type of :ruby
</span>    <span class='id identifier rubyid_c1'>c1</span> <span class='op'>=</span> <span class='const'>ClassLoader</span><span class='period'>.</span><span class='id identifier rubyid_provide_from_type'>provide_from_type</span><span class='lparen'>(</span><span class='id identifier rubyid_t1'>t1</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_c2'>c2</span> <span class='op'>=</span> <span class='const'>ClassLoader</span><span class='period'>.</span><span class='id identifier rubyid_provide_from_type'>provide_from_type</span><span class='lparen'>(</span><span class='id identifier rubyid_t2'>t2</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_c1'>c1</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_c2'>c2</span>
      <span class='id identifier rubyid_c2_superclasses'>c2_superclasses</span> <span class='op'>=</span> <span class='id identifier rubyid_superclasses'>superclasses</span><span class='lparen'>(</span><span class='id identifier rubyid_c2'>c2</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_superclasses'>superclasses</span><span class='lparen'>(</span><span class='id identifier rubyid_c1'>c1</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span><span class='op'>|</span><span class='id identifier rubyid_c1_super'>c1_super</span><span class='op'>|</span>
        <span class='id identifier rubyid_c2_superclasses'>c2_superclasses</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_c2_super'>c2_super</span><span class='op'>|</span>
          <span class='kw'>if</span> <span class='id identifier rubyid_c1_super'>c1_super</span> <span class='op'>==</span> <span class='id identifier rubyid_c2_super'>c2_super</span>
            <span class='kw'>return</span> <span class='const'>PRuntimeType</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='symbol'>:ruby</span><span class='comma'>,</span> <span class='id identifier rubyid_c1_super'>c1_super</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
          <span class='kw'>end</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># They better both be Any type, or the wrong thing was asked and nil is returned
</span>  <span class='id identifier rubyid_t1'>t1</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>PAnyType</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_t2'>t2</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>PAnyType</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='const'>PAnyType</span><span class='op'>::</span><span class='const'>DEFAULT</span> <span class='op'>:</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="debug_string-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>debug_string</strong>(t) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Produces a debug string representing the type (possibly with more information that the regular string format)</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


511
512
513
514</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 511</span>

<span class='kw'>def</span> <span class='id identifier rubyid_debug_string'>debug_string</span><span class='lparen'>(</span><span class='id identifier rubyid_t'>t</span><span class='rparen'>)</span>
  <span class='const'>Puppet</span><span class='period'>.</span><span class='id identifier rubyid_deprecation_warning'>deprecation_warning</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>TypeCalculator.debug_string is deprecated. Use TypeFormatter</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='const'>TypeFormatter</span><span class='period'>.</span><span class='id identifier rubyid_singleton'>singleton</span><span class='period'>.</span><span class='id identifier rubyid_debug_string'>debug_string</span><span class='lparen'>(</span><span class='id identifier rubyid_t'>t</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="generalize-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>generalize</strong>(o) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Generalizes value specific types. The generalized type is returned.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


276
277
278</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 276</span>

<span class='kw'>def</span> <span class='id identifier rubyid_generalize'>generalize</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_o'>o</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>PAnyType</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_o'>o</span><span class='period'>.</span><span class='id identifier rubyid_generalize'>generalize</span> <span class='op'>:</span> <span class='id identifier rubyid_o'>o</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="infer-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>infer</strong>(o) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Answers &#39;what is the single common Puppet Type describing o&#39;, or if o is an Array or Hash, what is the
single common type of the elements (or keys and elements for a Hash).</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 284</span>

<span class='kw'>def</span> <span class='id identifier rubyid_infer'>infer</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
  <span class='comment'># Optimize the most common cases into direct calls.
</span>  <span class='kw'>case</span> <span class='id identifier rubyid_o'>o</span>
  <span class='kw'>when</span> <span class='const'>String</span>
    <span class='id identifier rubyid_infer_String'>infer_String</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='const'>Integer</span>
    <span class='id identifier rubyid_infer_Integer'>infer_Integer</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='const'>Array</span>
    <span class='id identifier rubyid_infer_Array'>infer_Array</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='const'>Hash</span>
    <span class='id identifier rubyid_infer_Hash'>infer_Hash</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='const'>Evaluator</span><span class='op'>::</span><span class='const'>PuppetProc</span>
    <span class='id identifier rubyid_infer_PuppetProc'>infer_PuppetProc</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='cvar'>@@infer_visitor</span><span class='period'>.</span><span class='id identifier rubyid_visit_this_0'>visit_this_0</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="infer_and_reduce_type-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>infer_and_reduce_type</strong>(enumerable) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Reduce an enumerable of objects to a single common type</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


527
528
529</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 527</span>

<span class='kw'>def</span> <span class='id identifier rubyid_infer_and_reduce_type'>infer_and_reduce_type</span><span class='lparen'>(</span><span class='id identifier rubyid_enumerable'>enumerable</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_reduce_type'>reduce_type</span><span class='lparen'>(</span><span class='id identifier rubyid_enumerable'>enumerable</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_o'>o</span><span class='op'>|</span> <span class='id identifier rubyid_infer'>infer</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span> <span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="infer_Array-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>infer_Array</strong>(o) &nbsp;<span class="private note title">private</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


659
660
661
662
663
664
665</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 659</span>

<span class='kw'>def</span> <span class='id identifier rubyid_infer_Array'>infer_Array</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_o'>o</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='const'>PArrayType</span><span class='op'>::</span><span class='const'>EMPTY</span>
  <span class='kw'>else</span>
    <span class='const'>PArrayType</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_infer_and_reduce_type'>infer_and_reduce_type</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_size_as_type'>size_as_type</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="infer_Closure-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>infer_Closure</strong>(o) &nbsp;<span class="private note title">private</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


539
540
541</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 539</span>

<span class='kw'>def</span> <span class='id identifier rubyid_infer_Closure'>infer_Closure</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_o'>o</span><span class='period'>.</span><span class='id identifier rubyid_type'>type</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="infer_FalseClass-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>infer_FalseClass</strong>(o) &nbsp;<span class="private note title">private</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


643
644
645</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 643</span>

<span class='kw'>def</span> <span class='id identifier rubyid_infer_FalseClass'>infer_FalseClass</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
  <span class='const'>PBooleanType</span><span class='op'>::</span><span class='const'>DEFAULT</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="infer_Float-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>infer_Float</strong>(o) &nbsp;<span class="private note title">private</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


579
580
581</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 579</span>

<span class='kw'>def</span> <span class='id identifier rubyid_infer_Float'>infer_Float</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
  <span class='const'>PFloatType</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='comma'>,</span> <span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="infer_Function-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>infer_Function</strong>(o) &nbsp;<span class="private note title">private</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


549
550
551</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 549</span>

<span class='kw'>def</span> <span class='id identifier rubyid_infer_Function'>infer_Function</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_o'>o</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_dispatcher'>dispatcher</span><span class='period'>.</span><span class='id identifier rubyid_to_type'>to_type</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="infer_Hash-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>infer_Hash</strong>(o) &nbsp;<span class="private note title">private</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


668
669
670
671
672
673
674
675
676</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 668</span>

<span class='kw'>def</span> <span class='id identifier rubyid_infer_Hash'>infer_Hash</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_o'>o</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='const'>PHashType</span><span class='op'>::</span><span class='const'>EMPTY</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_ktype'>ktype</span> <span class='op'>=</span> <span class='id identifier rubyid_infer_and_reduce_type'>infer_and_reduce_type</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_etype'>etype</span> <span class='op'>=</span> <span class='id identifier rubyid_infer_and_reduce_type'>infer_and_reduce_type</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='period'>.</span><span class='id identifier rubyid_values'>values</span><span class='rparen'>)</span>
    <span class='const'>PHashType</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_ktype'>ktype</span><span class='comma'>,</span> <span class='id identifier rubyid_etype'>etype</span><span class='comma'>,</span> <span class='id identifier rubyid_size_as_type'>size_as_type</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="infer_Integer-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>infer_Integer</strong>(o) &nbsp;<span class="private note title">private</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


584
585
586</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 584</span>

<span class='kw'>def</span> <span class='id identifier rubyid_infer_Integer'>infer_Integer</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
  <span class='const'>PIntegerType</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='comma'>,</span> <span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="infer_Iterator-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>infer_Iterator</strong>(o) &nbsp;<span class="private note title">private</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


544
545
546</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 544</span>

<span class='kw'>def</span> <span class='id identifier rubyid_infer_Iterator'>infer_Iterator</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
  <span class='const'>PIteratorType</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='period'>.</span><span class='id identifier rubyid_element_type'>element_type</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="infer_Module-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>infer_Module</strong>(o) &nbsp;<span class="private note title">private</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p>The type of all modules is PType</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


534
535
536</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 534</span>

<span class='kw'>def</span> <span class='id identifier rubyid_infer_Module'>infer_Module</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
  <span class='const'>PType</span><span class='op'>::</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='const'>PRuntimeType</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='symbol'>:ruby</span><span class='comma'>,</span> <span class='id identifier rubyid_o'>o</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="infer_NilClass-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>infer_NilClass</strong>(o) &nbsp;<span class="private note title">private</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


594
595
596</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 594</span>

<span class='kw'>def</span> <span class='id identifier rubyid_infer_NilClass'>infer_NilClass</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
  <span class='const'>PUndefType</span><span class='op'>::</span><span class='const'>DEFAULT</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="infer_Object-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>infer_Object</strong>(o) &nbsp;<span class="private note title">private</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


554
555
556</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 554</span>

<span class='kw'>def</span> <span class='id identifier rubyid_infer_Object'>infer_Object</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
  <span class='const'>PRuntimeType</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='symbol'>:ruby</span><span class='comma'>,</span> <span class='id identifier rubyid_o'>o</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="infer_PAnyType-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>infer_PAnyType</strong>(o) &nbsp;<span class="private note title">private</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p>The type of all types is PType</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


561
562
563</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 561</span>

<span class='kw'>def</span> <span class='id identifier rubyid_infer_PAnyType'>infer_PAnyType</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
  <span class='const'>PType</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="infer_Proc-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>infer_Proc</strong>(o) &nbsp;<span class="private note title">private</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>o</span>
      
      
        <span class='type'>(<tt>Proc</tt>)</span>
      
      
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


600
601
602
603
604
605
606
607
608
609
610
611
612
613
614
615
616
617</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 600</span>

<span class='kw'>def</span> <span class='id identifier rubyid_infer_Proc'>infer_Proc</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_min'>min</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='id identifier rubyid_max'>max</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='id identifier rubyid_mapped_types'>mapped_types</span> <span class='op'>=</span> <span class='id identifier rubyid_o'>o</span><span class='period'>.</span><span class='id identifier rubyid_parameters'>parameters</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_p'>p</span><span class='op'>|</span>
    <span class='kw'>case</span> <span class='id identifier rubyid_p'>p</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
    <span class='kw'>when</span> <span class='symbol'>:rest</span>
      <span class='id identifier rubyid_max'>max</span> <span class='op'>=</span> <span class='symbol'>:default</span>
      <span class='kw'>break</span> <span class='const'>PAnyType</span><span class='op'>::</span><span class='const'>DEFAULT</span>
    <span class='kw'>when</span> <span class='symbol'>:req</span>
      <span class='id identifier rubyid_min'>min</span> <span class='op'>+=</span> <span class='int'>1</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_max'>max</span> <span class='op'>+=</span> <span class='int'>1</span>
    <span class='const'>PAnyType</span><span class='op'>::</span><span class='const'>DEFAULT</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_mapped_types'>mapped_types</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_min'>min</span>
  <span class='id identifier rubyid_mapped_types'>mapped_types</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_max'>max</span>
  <span class='const'>TypeFactory</span><span class='period'>.</span><span class='id identifier rubyid_callable'>callable</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_mapped_types'>mapped_types</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="infer_PType-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>infer_PType</strong>(o) &nbsp;<span class="private note title">private</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p>The type of all types is PType
This is the metatype short circuit.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


569
570
571</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 569</span>

<span class='kw'>def</span> <span class='id identifier rubyid_infer_PType'>infer_PType</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
  <span class='const'>PType</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="infer_PuppetProc-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>infer_PuppetProc</strong>(o) &nbsp;<span class="private note title">private</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


620
621
622</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 620</span>

<span class='kw'>def</span> <span class='id identifier rubyid_infer_PuppetProc'>infer_PuppetProc</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_infer_Closure'>infer_Closure</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='period'>.</span><span class='id identifier rubyid_closure'>closure</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="infer_Regexp-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>infer_Regexp</strong>(o) &nbsp;<span class="private note title">private</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


589
590
591</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 589</span>

<span class='kw'>def</span> <span class='id identifier rubyid_infer_Regexp'>infer_Regexp</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
  <span class='const'>PRegexpType</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='period'>.</span><span class='id identifier rubyid_source'>source</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="infer_Resource-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>infer_Resource</strong>(o) &nbsp;<span class="private note title">private</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p>A Puppet::Parser::Resource, or Puppet::Resource</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


650
651
652
653
654
655
656</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 650</span>

<span class='kw'>def</span> <span class='id identifier rubyid_infer_Resource'>infer_Resource</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
  <span class='comment'># Only Puppet::Resource can have a title that is a symbol :undef, a PResource cannot.
</span>  <span class='comment'># A mapping must be made to empty string. A nil value will result in an error later
</span>  <span class='id identifier rubyid_title'>title</span> <span class='op'>=</span> <span class='id identifier rubyid_o'>o</span><span class='period'>.</span><span class='id identifier rubyid_title'>title</span>
  <span class='id identifier rubyid_title'>title</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='symbol'>:undef</span> <span class='op'>==</span> <span class='id identifier rubyid_title'>title</span>
  <span class='const'>PType</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='const'>PResourceType</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='period'>.</span><span class='id identifier rubyid_type'>type</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='comma'>,</span> <span class='id identifier rubyid_title'>title</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="infer_set-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>infer_set</strong>(o) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Answers &#39;what is the set of Puppet Types of o&#39;</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


309
310
311
312
313
314
315
316
317
318</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 309</span>

<span class='kw'>def</span> <span class='id identifier rubyid_infer_set'>infer_set</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id identifier rubyid_o'>o</span>
    <span class='kw'>when</span> <span class='const'>Array</span>
      <span class='id identifier rubyid_infer_set_Array'>infer_set_Array</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
    <span class='kw'>when</span> <span class='const'>Hash</span>
      <span class='id identifier rubyid_infer_set_Hash'>infer_set_Hash</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_infer_set_Object'>infer_set_Object</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="infer_String-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>infer_String</strong>(o) &nbsp;<span class="private note title">private</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


574
575
576</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 574</span>

<span class='kw'>def</span> <span class='id identifier rubyid_infer_String'>infer_String</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
  <span class='const'>PStringType</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_size_as_type'>size_as_type</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='id identifier rubyid_o'>o</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="infer_Symbol-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>infer_Symbol</strong>(o) &nbsp;<span class="private note title">private</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p>Inference of :default as PDefaultType, and all other are Ruby[Symbol]</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


626
627
628
629
630
631
632
633
634
635</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 626</span>

<span class='kw'>def</span> <span class='id identifier rubyid_infer_Symbol'>infer_Symbol</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id identifier rubyid_o'>o</span>
  <span class='kw'>when</span> <span class='symbol'>:default</span>
    <span class='const'>PDefaultType</span><span class='op'>::</span><span class='const'>DEFAULT</span>
  <span class='kw'>when</span> <span class='symbol'>:undef</span>
    <span class='const'>PUndefType</span><span class='op'>::</span><span class='const'>DEFAULT</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_infer_Object'>infer_Object</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="infer_TrueClass-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>infer_TrueClass</strong>(o) &nbsp;<span class="private note title">private</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


638
639
640</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 638</span>

<span class='kw'>def</span> <span class='id identifier rubyid_infer_TrueClass'>infer_TrueClass</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
  <span class='const'>PBooleanType</span><span class='op'>::</span><span class='const'>DEFAULT</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="injectable_class-instance_method">
  
    - (<tt><span class='object_link'>Class</span></tt><sup>?</sup>) <strong>injectable_class</strong>(klazz) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Answers the question &#39;is it possible to inject an instance of the given class&#39;
A class is injectable if it has a special <em>assisted inject</em> class method called <code>inject</code> taking
an injector and a scope as argument, or if it has a zero args <code>initialize</code> method.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>klazz</span>
      
      
        <span class='type'>(<tt><span class='object_link'>Class</span></tt>, <tt><span class='object_link'><a href="PRuntimeType.html" title="Puppet::Pops::Types::PRuntimeType (class)">PRuntimeType</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the class/type to check if it is injectable</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'>Class</span></tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the injectable Class, or nil if not injectable</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


183
184
185
186
187
188
189
190
191
192
193
194
195
196</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 183</span>

<span class='kw'>def</span> <span class='id identifier rubyid_injectable_class'>injectable_class</span><span class='lparen'>(</span><span class='id identifier rubyid_klazz'>klazz</span><span class='rparen'>)</span>
  <span class='comment'># Handle case when we get a PType instead of a class
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_klazz'>klazz</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>PRuntimeType</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_klazz'>klazz</span> <span class='op'>=</span> <span class='const'>ClassLoader</span><span class='period'>.</span><span class='id identifier rubyid_provide'>provide</span><span class='lparen'>(</span><span class='id identifier rubyid_klazz'>klazz</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># data types can not be injected (check again, it is not safe to assume that given RubyRuntime klazz arg was ok)
</span>  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>unless</span> <span class='id identifier rubyid_type'>type</span><span class='lparen'>(</span><span class='id identifier rubyid_klazz'>klazz</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>PRuntimeType</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_klazz'>klazz</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:inject</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_klazz'>klazz</span><span class='period'>.</span><span class='id identifier rubyid_method'>method</span><span class='lparen'>(</span><span class='symbol'>:inject</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_arity'>arity</span> <span class='op'>==</span> <span class='op'>-</span><span class='int'>4</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_klazz'>klazz</span><span class='period'>.</span><span class='id identifier rubyid_instance_method'>instance_method</span><span class='lparen'>(</span><span class='symbol'>:initialize</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_arity'>arity</span> <span class='op'>==</span> <span class='int'>0</span>
    <span class='id identifier rubyid_klazz'>klazz</span>
  <span class='kw'>else</span>
    <span class='kw'>nil</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="instance?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>instance?</strong>(t, o) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Answers &#39;is o an instance of type t&#39;</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


330
331
332
333
334
335</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 330</span>

<span class='kw'>def</span> <span class='id identifier rubyid_instance?'>instance?</span><span class='lparen'>(</span><span class='id identifier rubyid_t'>t</span><span class='comma'>,</span> <span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Module</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_t'>t</span> <span class='op'>=</span> <span class='id identifier rubyid_type'>type</span><span class='lparen'>(</span><span class='id identifier rubyid_t'>t</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>PAnyType</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_instance?'>instance?</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_pnil?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>is_pnil?</strong>(t) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Answers if t represents the puppet type PUndefType</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


347
348
349</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 347</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_pnil?'>is_pnil?</span><span class='lparen'>(</span><span class='id identifier rubyid_t'>t</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>PUndefType</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_ptype?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>is_ptype?</strong>(t) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Answers if t is a puppet type</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


340
341
342</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 340</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_ptype?'>is_ptype?</span><span class='lparen'>(</span><span class='id identifier rubyid_t'>t</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>PAnyType</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="reduce_type-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>reduce_type</strong>(enumerable) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Reduces an enumerable of types to a single common type.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


520
521
522</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 520</span>

<span class='kw'>def</span> <span class='id identifier rubyid_reduce_type'>reduce_type</span><span class='lparen'>(</span><span class='id identifier rubyid_enumerable'>enumerable</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_enumerable'>enumerable</span><span class='period'>.</span><span class='id identifier rubyid_reduce'>reduce</span><span class='lparen'>(</span><span class='kw'>nil</span><span class='rparen'>)</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_memo'>memo</span><span class='comma'>,</span> <span class='id identifier rubyid_t'>t</span><span class='op'>|</span> <span class='id identifier rubyid_common_type'>common_type</span><span class='lparen'>(</span><span class='id identifier rubyid_memo'>memo</span><span class='comma'>,</span> <span class='id identifier rubyid_t'>t</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="string-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>string</strong>(t) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Produces a string representing the type</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


503
504
505
506</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 503</span>

<span class='kw'>def</span> <span class='id identifier rubyid_string'>string</span><span class='lparen'>(</span><span class='id identifier rubyid_t'>t</span><span class='rparen'>)</span>
  <span class='const'>Puppet</span><span class='period'>.</span><span class='id identifier rubyid_deprecation_warning'>deprecation_warning</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>TypeCalculator.string is deprecated. Use TypeFormatter</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='const'>TypeFormatter</span><span class='period'>.</span><span class='id identifier rubyid_singleton'>singleton</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span><span class='lparen'>(</span><span class='id identifier rubyid_t'>t</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="tuple_entry_at-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>tuple_entry_at</strong>(tuple_t, from, to, index) &nbsp;<span class="private note title">private</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p>Produces the tuple entry at the given index given a tuple type, its from/to constraints on the last
type, and an index.
Produces nil if the index is out of bounds
from must be less than to, and from may not be less than 0</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


750
751
752
753
754
755
756
757
758
759
760</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 750</span>

<span class='kw'>def</span> <span class='id identifier rubyid_tuple_entry_at'>tuple_entry_at</span><span class='lparen'>(</span><span class='id identifier rubyid_tuple_t'>tuple_t</span><span class='comma'>,</span> <span class='id identifier rubyid_from'>from</span><span class='comma'>,</span> <span class='id identifier rubyid_to'>to</span><span class='comma'>,</span> <span class='id identifier rubyid_index'>index</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_regular'>regular</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_tuple_t'>tuple_t</span><span class='period'>.</span><span class='id identifier rubyid_types'>types</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>-</span> <span class='int'>1</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_index'>index</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_regular'>regular</span>
    <span class='id identifier rubyid_tuple_t'>tuple_t</span><span class='period'>.</span><span class='id identifier rubyid_types'>types</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span><span class='rbracket'>]</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_index'>index</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_regular'>regular</span> <span class='op'>+</span> <span class='id identifier rubyid_to'>to</span>
    <span class='comment'># in the varargs part
</span>    <span class='id identifier rubyid_tuple_t'>tuple_t</span><span class='period'>.</span><span class='id identifier rubyid_types'>types</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span>
  <span class='kw'>else</span>
    <span class='kw'>nil</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="type-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>type</strong>(c) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Answers &#39;what is the Puppet Type corresponding to the given Ruby class&#39;</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>c</span>
      
      
        <span class='type'>(<tt><span class='object_link'>Module</span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the class for which a puppet type is wanted</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/types/type_calculator.rb', line 241</span>

<span class='kw'>def</span> <span class='id identifier rubyid_type'>type</span><span class='lparen'>(</span><span class='id identifier rubyid_c'>c</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Argument must be a Module</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_c'>c</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'>Module</span>

  <span class='comment'># Can&#39;t use a visitor here since we don&#39;t have an instance of the class
</span>  <span class='kw'>case</span>
  <span class='kw'>when</span> <span class='id identifier rubyid_c'>c</span> <span class='op'>&lt;=</span> <span class='const'>Integer</span>
    <span class='id identifier rubyid_type'>type</span> <span class='op'>=</span> <span class='const'>PIntegerType</span><span class='op'>::</span><span class='const'>DEFAULT</span>
  <span class='kw'>when</span> <span class='id identifier rubyid_c'>c</span> <span class='op'>==</span> <span class='const'>Float</span>
    <span class='id identifier rubyid_type'>type</span> <span class='op'>=</span> <span class='const'>PFloatType</span><span class='op'>::</span><span class='const'>DEFAULT</span>
  <span class='kw'>when</span> <span class='id identifier rubyid_c'>c</span> <span class='op'>==</span> <span class='const'>Numeric</span>
    <span class='id identifier rubyid_type'>type</span> <span class='op'>=</span> <span class='const'>PNumericType</span><span class='op'>::</span><span class='const'>DEFAULT</span>
  <span class='kw'>when</span> <span class='id identifier rubyid_c'>c</span> <span class='op'>==</span> <span class='const'>String</span>
    <span class='id identifier rubyid_type'>type</span> <span class='op'>=</span> <span class='const'>PStringType</span><span class='op'>::</span><span class='const'>DEFAULT</span>
  <span class='kw'>when</span> <span class='id identifier rubyid_c'>c</span> <span class='op'>==</span> <span class='const'>Regexp</span>
    <span class='id identifier rubyid_type'>type</span> <span class='op'>=</span> <span class='const'>PRegexpType</span><span class='op'>::</span><span class='const'>DEFAULT</span>
  <span class='kw'>when</span> <span class='id identifier rubyid_c'>c</span> <span class='op'>==</span> <span class='const'>NilClass</span>
    <span class='id identifier rubyid_type'>type</span> <span class='op'>=</span> <span class='const'>PUndefType</span><span class='op'>::</span><span class='const'>DEFAULT</span>
  <span class='kw'>when</span> <span class='id identifier rubyid_c'>c</span> <span class='op'>==</span> <span class='const'>FalseClass</span><span class='comma'>,</span> <span class='id identifier rubyid_c'>c</span> <span class='op'>==</span> <span class='const'>TrueClass</span>
    <span class='id identifier rubyid_type'>type</span> <span class='op'>=</span> <span class='const'>PBooleanType</span><span class='op'>::</span><span class='const'>DEFAULT</span>
  <span class='kw'>when</span> <span class='id identifier rubyid_c'>c</span> <span class='op'>==</span> <span class='const'>Class</span>
    <span class='id identifier rubyid_type'>type</span> <span class='op'>=</span> <span class='const'>PType</span><span class='op'>::</span><span class='const'>DEFAULT</span>
  <span class='kw'>when</span> <span class='id identifier rubyid_c'>c</span> <span class='op'>==</span> <span class='const'>Array</span>
    <span class='comment'># Assume array of data values
</span>    <span class='id identifier rubyid_type'>type</span> <span class='op'>=</span> <span class='const'>PArrayType</span><span class='op'>::</span><span class='const'>DATA</span>
  <span class='kw'>when</span> <span class='id identifier rubyid_c'>c</span> <span class='op'>==</span> <span class='const'>Hash</span>
    <span class='comment'># Assume hash with scalar keys and data values
</span>    <span class='id identifier rubyid_type'>type</span> <span class='op'>=</span> <span class='const'>PHashType</span><span class='op'>::</span><span class='const'>DATA</span>
 <span class='kw'>else</span>
    <span class='id identifier rubyid_type'>type</span> <span class='op'>=</span> <span class='const'>PRuntimeType</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='symbol'>:ruby</span><span class='comma'>,</span> <span class='id identifier rubyid_c'>c</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_type'>type</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Wed Mar 16 18:28:54 2016 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.6 (ruby-2.0.0).
</div>

  </body>
</html>