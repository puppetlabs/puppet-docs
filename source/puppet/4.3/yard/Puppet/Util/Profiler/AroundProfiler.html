<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Puppet::Util::Profiler::AroundProfiler
  
    &mdash; Documentation by YARD 0.8.7.6
  
</title>

  <link rel="stylesheet" href="../../../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../../../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../../../';
  framesUrl = "../../../frames.html#!Puppet/Util/Profiler/AroundProfiler.html";
</script>


  <script type="text/javascript" charset="utf-8" src="../../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../../../_index.html">Index (A)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../Puppet.html" title="Puppet (module)">Puppet</a></span></span> &raquo; <span class='title'><span class='object_link'>Util</span></span> &raquo; <span class='title'><span class='object_link'><a href="../Profiler.html" title="Puppet::Util::Profiler (module)">Profiler</a></span></span>
     &raquo; 
    <span class="title">AroundProfiler</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../../../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../../../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: Puppet::Util::Profiler::AroundProfiler
  
  
  <span class="private note title">Private</span>
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'>Object</span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'>Object</span></li>
          
            <li class="next">Puppet::Util::Profiler::AroundProfiler</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/puppet/util/profiler/around_profiler.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This class is part of a private API.</strong>
  You should avoid using this class if possible, as it may be removed or be changed in the future.
</p>
<p>A Profiler that can be used to wrap around blocks of code. It is configured
with other profilers and controls them to start before the block is executed
and finish after the block is executed.</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#add_profiler-instance_method" title="#add_profiler (instance method)">- (Object) <strong>add_profiler</strong>(profiler) </a>
    

    
  </span>
  
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#clear-instance_method" title="#clear (instance method)">- (Object) <strong>clear</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>Reset the profiling system to the original state.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#current-instance_method" title="#current (instance method)">- (Object) <strong>current</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>Retrieve the current list of profilers.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#profile-instance_method" title="#profile (instance method)">- (Object) <strong>profile</strong>(message, metric_id) </a>
    

    
  </span>
  
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>Profile a block of code and log the time it took to execute.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#remove_profiler-instance_method" title="#remove_profiler (instance method)">- (Object) <strong>remove_profiler</strong>(profiler) </a>
    

    
  </span>
  
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="add_profiler-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>add_profiler</strong>(profiler) &nbsp;<span class="private note title">private</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>profiler</span>
      
      
        <span class='type'>(<tt>#<span class='object_link'><a href="../Profiler.html#profile-class_method" title="Puppet::Util::Profiler.profile (method)">profile</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A profiler for the current thread</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


28
29
30
31</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/util/profiler/around_profiler.rb', line 28</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_profiler'>add_profiler</span><span class='lparen'>(</span><span class='id identifier rubyid_profiler'>profiler</span><span class='rparen'>)</span>
  <span class='ivar'>@profilers</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_profiler'>profiler</span>
  <span class='id identifier rubyid_profiler'>profiler</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="clear-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>clear</strong> &nbsp;<span class="private note title">private</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p>Reset the profiling system to the original state</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


15
16
17</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/util/profiler/around_profiler.rb', line 15</span>

<span class='kw'>def</span> <span class='id identifier rubyid_clear'>clear</span>
  <span class='ivar'>@profilers</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="current-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>current</strong> &nbsp;<span class="private note title">private</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p>Retrieve the current list of profilers</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


22
23
24</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/util/profiler/around_profiler.rb', line 22</span>

<span class='kw'>def</span> <span class='id identifier rubyid_current'>current</span>
  <span class='ivar'>@profilers</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="profile-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>profile</strong>(message, metric_id) &nbsp;<span class="private note title">private</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p>Profile a block of code and log the time it took to execute.</p>

<p>This outputs logs entries to the Puppet masters logging destination
providing the time it took, a message describing the profiled code
and a leaf location marking where the profile method was called
in the profiled hierachy.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>message</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A description of the profiled event</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>metric_id</span>
      
      
        <span class='type'>(<tt><span class='object_link'>Array</span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A list of strings making up the ID of a metric to profile</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>block</span>
      
      
        <span class='type'>(<tt>Block</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The segment of code to profile</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/util/profiler/around_profiler.rb', line 50</span>

<span class='kw'>def</span> <span class='id identifier rubyid_profile'>profile</span><span class='lparen'>(</span><span class='id identifier rubyid_message'>message</span><span class='comma'>,</span> <span class='id identifier rubyid_metric_id'>metric_id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_retval'>retval</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_contexts'>contexts</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@profilers</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_profiler'>profiler</span><span class='op'>|</span>
    <span class='id identifier rubyid_contexts'>contexts</span><span class='lbracket'>[</span><span class='id identifier rubyid_profiler'>profiler</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_profiler'>profiler</span><span class='period'>.</span><span class='id identifier rubyid_start'>start</span><span class='lparen'>(</span><span class='id identifier rubyid_message'>message</span><span class='comma'>,</span> <span class='id identifier rubyid_metric_id'>metric_id</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>begin</span>
    <span class='id identifier rubyid_retval'>retval</span> <span class='op'>=</span> <span class='kw'>yield</span>
  <span class='kw'>ensure</span>
    <span class='ivar'>@profilers</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_profiler'>profiler</span><span class='op'>|</span>
      <span class='id identifier rubyid_profiler'>profiler</span><span class='period'>.</span><span class='id identifier rubyid_finish'>finish</span><span class='lparen'>(</span><span class='id identifier rubyid_contexts'>contexts</span><span class='lbracket'>[</span><span class='id identifier rubyid_profiler'>profiler</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_message'>message</span><span class='comma'>,</span> <span class='id identifier rubyid_metric_id'>metric_id</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_retval'>retval</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="remove_profiler-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>remove_profiler</strong>(profiler) &nbsp;<span class="private note title">private</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>profiler</span>
      
      
        <span class='type'>(<tt>#<span class='object_link'><a href="../Profiler.html#profile-class_method" title="Puppet::Util::Profiler.profile (method)">profile</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A profiler to remove from the current thread</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


35
36
37</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/util/profiler/around_profiler.rb', line 35</span>

<span class='kw'>def</span> <span class='id identifier rubyid_remove_profiler'>remove_profiler</span><span class='lparen'>(</span><span class='id identifier rubyid_profiler'>profiler</span><span class='rparen'>)</span>
  <span class='ivar'>@profilers</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_profiler'>profiler</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Fri Jan 15 16:54:52 2016 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.6 (ruby-2.0.0).
</div>

  </body>
</html>