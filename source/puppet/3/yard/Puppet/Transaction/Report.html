<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Puppet::Transaction::Report
  
    &mdash; Documentation by YARD 0.8.7.3
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../../';
  framesUrl = "../../frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../../_index.html">Index (R)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../Puppet.html" title="Puppet (module)">Puppet</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Transaction.html" title="Puppet::Transaction (class)">Transaction</a></span></span>
     &raquo; 
    <span class="title">Report</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: Puppet::Transaction::Report
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'>Object</span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'>Object</span></li>
          
            <li class="next">Puppet::Transaction::Report</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/puppet/transaction/report.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>This class is used to report what happens on a client.
There are two types of data in a report; <em>Logs</em> and <em>Metrics</em>.</p>

<ul>
<li><strong>Logs</strong> - are the output that each change produces.</li>
<li><strong>Metrics</strong> - are all of the numerical data involved in the transaction.</li>
</ul>


<p>Use <span class='object_link'><a href="../Reports.html" title="Puppet::Reports (class)">Reports</a></span> class to create a new custom report type. This class is indirectly used
as a source of data to report in such a registered report.</p>

<h2>Metrics</h2>

<p>There are three types of metrics in each report, and each type of metric has one or more values.</p>

<ul>
<li>Time: Keeps track of how long things took.

<ul>
<li>Total: Total time for the configuration run</li>
<li>File:</li>
<li>Exec:</li>
<li>User:</li>
<li>Group:</li>
<li>Config Retrieval: How long the configuration took to retrieve</li>
<li>Service:</li>
<li>Package:</li>
</ul>
</li>
<li>Resources: Keeps track of the following stats:

<ul>
<li>Total: The total number of resources being managed</li>
<li>Skipped: How many resources were skipped, because of either tagging or scheduling restrictions</li>
<li>Scheduled: How many resources met any scheduling restrictions</li>
<li>Out of Sync: How many resources were out of sync</li>
<li>Applied: How many resources were attempted to be fixed</li>
<li>Failed: How many resources were not successfully fixed</li>
<li>Restarted: How many resources were restarted because their dependencies changed</li>
<li>Failed Restarts: How many resources could not be restarted</li>
</ul>
</li>
<li>Changes: The total number of changes in the transaction.</li>
</ul>



  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#%3C%3C-instance_method" title="#&lt;&lt; (instance method)">- (Object) <strong>&lt;&lt;</strong>(msg) </a>
    

    
  </span>
  
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#add_metric-instance_method" title="#add_metric (instance method)">- (Object) <strong>add_metric</strong>(name, hash) </a>
    

    
  </span>
  
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#add_resource_status-instance_method" title="#add_resource_status (instance method)">- (Object) <strong>add_resource_status</strong>(status) </a>
    

    
  </span>
  
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#add_times-instance_method" title="#add_times (instance method)">- (Object) <strong>add_times</strong>(name, value) </a>
    

    
  </span>
  
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#compute_status-instance_method" title="#compute_status (instance method)">- (Object) <strong>compute_status</strong>(resource_metrics, change_metric) </a>
    

    
  </span>
  
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#exit_status-instance_method" title="#exit_status (instance method)">- (Integer) <strong>exit_status</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Computes a single number that represents the report's status.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#finalize_report-instance_method" title="#finalize_report (instance method)">- (Object) <strong>finalize_report</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Report) <strong>initialize</strong>(kind, configuration_version = nil, environment = nil, transaction_uuid = nil) </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>A new instance of Report.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize_from_hash-instance_method" title="#initialize_from_hash (instance method)">- (Object) <strong>initialize_from_hash</strong>(data) </a>
    

    
  </span>
  
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#name-instance_method" title="#name (instance method)">- (String) <strong>name</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The host name.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#prune_internal_data-instance_method" title="#prune_internal_data (instance method)">- (Object) <strong>prune_internal_data</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#raw_summary-instance_method" title="#raw_summary (instance method)">- (Hash&lt;{String =&gt; Object}&gt;) <strong>raw_summary</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Provides a raw hash summary of this report.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#summary-instance_method" title="#summary (instance method)">- (String) <strong>summary</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Provide a human readable textual summary of this report.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#to_yaml_properties-instance_method" title="#to_yaml_properties (instance method)">- (Object) <strong>to_yaml_properties</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Puppet::Transaction::Report (class)">Report</a></span></tt>) <strong>initialize</strong>(kind, configuration_version = nil, environment = nil, transaction_uuid = nil) &nbsp;<span class="private note title">private</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p>Returns a new instance of Report</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


168
169
170
171
172
173
174
175
176
177
178
179
180
181
182</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/transaction/report.rb', line 168</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='rubyid_kind identifier id'>kind</span><span class='comma token'>,</span> <span class='rubyid_configuration_version identifier id'>configuration_version</span><span class='assign token'>=</span><span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_environment identifier id'>environment</span><span class='assign token'>=</span><span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_transaction_uuid identifier id'>transaction_uuid</span><span class='assign token'>=</span><span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='rubyid_@metrics ivar id'>@metrics</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_@logs ivar id'>@logs</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='rubyid_@resource_statuses ivar id'>@resource_statuses</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_@external_times ivar id'>@external_times</span> <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_@host ivar id'>@host</span> <span class='assign token'>=</span> <span class='rubyid_Puppet constant id'>Puppet</span><span class='lbrack token'>[</span><span class='symbol val'>:node_name_value</span><span class='rbrack token'>]</span>
  <span class='rubyid_@time ivar id'>@time</span> <span class='assign token'>=</span> <span class='rubyid_Time constant id'>Time</span><span class='dot token'>.</span><span class='rubyid_now identifier id'>now</span>
  <span class='rubyid_@kind ivar id'>@kind</span> <span class='assign token'>=</span> <span class='rubyid_kind identifier id'>kind</span>
  <span class='rubyid_@report_format ivar id'>@report_format</span> <span class='assign token'>=</span> <span class='integer val'>4</span>
  <span class='rubyid_@puppet_version ivar id'>@puppet_version</span> <span class='assign token'>=</span> <span class='rubyid_Puppet constant id'>Puppet</span><span class='dot token'>.</span><span class='rubyid_version identifier id'>version</span>
  <span class='rubyid_@configuration_version ivar id'>@configuration_version</span> <span class='assign token'>=</span> <span class='rubyid_configuration_version identifier id'>configuration_version</span>
  <span class='rubyid_@transaction_uuid ivar id'>@transaction_uuid</span> <span class='assign token'>=</span> <span class='rubyid_transaction_uuid identifier id'>transaction_uuid</span>
  <span class='rubyid_@environment ivar id'>@environment</span> <span class='assign token'>=</span> <span class='rubyid_environment identifier id'>environment</span>
  <span class='rubyid_@status ivar id'>@status</span> <span class='assign token'>=</span> <span class='string val'>'failed'</span> <span class='comment val'># assume failed until the report is finalized</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="<<-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>&lt;&lt;</strong>(msg) &nbsp;<span class="private note title">private</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>



  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


112
113
114
115</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/transaction/report.rb', line 112</span>

<span class='rubyid_def def kw'>def</span> <span class='lshft op'>&lt;&lt;</span><span class='lparen token'>(</span><span class='rubyid_msg identifier id'>msg</span><span class='rparen token'>)</span>
  <span class='rubyid_@logs ivar id'>@logs</span> <span class='lshft op'>&lt;&lt;</span> <span class='rubyid_msg identifier id'>msg</span>
  <span class='rubyid_self self kw'>self</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="add_metric-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>add_metric</strong>(name, hash) &nbsp;<span class="private note title">private</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>



  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


123
124
125
126
127
128
129
130
131
132</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/transaction/report.rb', line 123</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_add_metric identifier id'>add_metric</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_hash identifier id'>hash</span><span class='rparen token'>)</span>
  <span class='rubyid_metric identifier id'>metric</span> <span class='assign token'>=</span> <span class='rubyid_Puppet constant id'>Puppet</span><span class='colon2 op'>::</span><span class='rubyid_Util constant id'>Util</span><span class='colon2 op'>::</span><span class='rubyid_Metric constant id'>Metric</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='rparen token'>)</span>

  <span class='rubyid_hash identifier id'>hash</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='bitor op'>|</span>
    <span class='rubyid_metric identifier id'>metric</span><span class='dot token'>.</span><span class='rubyid_newvalue identifier id'>newvalue</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_@metrics ivar id'>@metrics</span><span class='lbrack token'>[</span><span class='rubyid_metric identifier id'>metric</span><span class='dot token'>.</span><span class='rubyid_name identifier id'>name</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_metric identifier id'>metric</span>
  <span class='rubyid_metric identifier id'>metric</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="add_resource_status-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>add_resource_status</strong>(status) &nbsp;<span class="private note title">private</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>



  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


135
136
137</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/transaction/report.rb', line 135</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_add_resource_status identifier id'>add_resource_status</span><span class='lparen token'>(</span><span class='rubyid_status identifier id'>status</span><span class='rparen token'>)</span>
  <span class='rubyid_@resource_statuses ivar id'>@resource_statuses</span><span class='lbrack token'>[</span><span class='rubyid_status identifier id'>status</span><span class='dot token'>.</span><span class='rubyid_resource identifier id'>resource</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_status identifier id'>status</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="add_times-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>add_times</strong>(name, value) &nbsp;<span class="private note title">private</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>



  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


118
119
120</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/transaction/report.rb', line 118</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_add_times identifier id'>add_times</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='rparen token'>)</span>
  <span class='rubyid_@external_times ivar id'>@external_times</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="compute_status-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>compute_status</strong>(resource_metrics, change_metric) &nbsp;<span class="private note title">private</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>



  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


140
141
142
143
144
145
146
147
148</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/transaction/report.rb', line 140</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_compute_status identifier id'>compute_status</span><span class='lparen token'>(</span><span class='rubyid_resource_metrics identifier id'>resource_metrics</span><span class='comma token'>,</span> <span class='rubyid_change_metric identifier id'>change_metric</span><span class='rparen token'>)</span>
  <span class='rubyid_if if kw'>if</span> <span class='lparen token'>(</span><span class='rubyid_resource_metrics identifier id'>resource_metrics</span><span class='lbrack token'>[</span><span class='string val'>&quot;failed&quot;</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='integer val'>0</span><span class='rparen token'>)</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
    <span class='string val'>'failed'</span>
  <span class='rubyid_elsif elsif kw'>elsif</span> <span class='rubyid_change_metric identifier id'>change_metric</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
    <span class='string val'>'changed'</span>
  <span class='rubyid_else else kw'>else</span>
    <span class='string val'>'unchanged'</span>
  <span class='rubyid_end end kw'>end</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="exit_status-instance_method">
  
    - (<tt>Integer</tt>) <strong>exit_status</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Computes a single number that represents the report's status.
The computation is based on the contents of this report's metrics.
The resulting number is a bitmask where
individual bits represent the presence of different metrics.</p>

<ul>
<li>0x2 set if there are changes</li>
<li>0x4 set if there are resource failures or resources that failed to restart</li>
</ul>



  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A bitmask where 0x2 is set if there are changes, and 0x4 is set of there are failures.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


308
309
310
311
312
313
314</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/transaction/report.rb', line 308</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_exit_status identifier id'>exit_status</span>
  <span class='rubyid_status identifier id'>status</span> <span class='assign token'>=</span> <span class='integer val'>0</span>
  <span class='rubyid_status identifier id'>status</span> <span class='opasgn op'>|=</span> <span class='integer val'>2</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_@metrics ivar id'>@metrics</span><span class='lbrack token'>[</span><span class='string val'>&quot;changes&quot;</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='string val'>&quot;total&quot;</span><span class='rbrack token'>]</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
  <span class='rubyid_status identifier id'>status</span> <span class='opasgn op'>|=</span> <span class='integer val'>4</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_@metrics ivar id'>@metrics</span><span class='lbrack token'>[</span><span class='string val'>&quot;resources&quot;</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='string val'>&quot;failed&quot;</span><span class='rbrack token'>]</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
  <span class='rubyid_status identifier id'>status</span> <span class='opasgn op'>|=</span> <span class='integer val'>4</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_@metrics ivar id'>@metrics</span><span class='lbrack token'>[</span><span class='string val'>&quot;resources&quot;</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='string val'>&quot;failed_to_restart&quot;</span><span class='rbrack token'>]</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
  <span class='rubyid_status identifier id'>status</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="finalize_report-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>finalize_report</strong> &nbsp;<span class="private note title">private</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>



  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


156
157
158
159
160
161
162
163
164
165</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/transaction/report.rb', line 156</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_finalize_report identifier id'>finalize_report</span>
  <span class='rubyid_prune_internal_data identifier id'>prune_internal_data</span>

  <span class='rubyid_resource_metrics identifier id'>resource_metrics</span> <span class='assign token'>=</span> <span class='rubyid_add_metric identifier id'>add_metric</span><span class='lparen token'>(</span><span class='symbol val'>:resources</span><span class='comma token'>,</span> <span class='rubyid_calculate_resource_metrics identifier id'>calculate_resource_metrics</span><span class='rparen token'>)</span>
  <span class='rubyid_add_metric identifier id'>add_metric</span><span class='lparen token'>(</span><span class='symbol val'>:time</span><span class='comma token'>,</span> <span class='rubyid_calculate_time_metrics identifier id'>calculate_time_metrics</span><span class='rparen token'>)</span>
  <span class='rubyid_change_metric identifier id'>change_metric</span> <span class='assign token'>=</span> <span class='rubyid_calculate_change_metric identifier id'>calculate_change_metric</span>
  <span class='rubyid_add_metric identifier id'>add_metric</span><span class='lparen token'>(</span><span class='symbol val'>:changes</span><span class='comma token'>,</span> <span class='lbrace token'>{</span><span class='string val'>&quot;total&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_change_metric identifier id'>change_metric</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='rubyid_add_metric identifier id'>add_metric</span><span class='lparen token'>(</span><span class='symbol val'>:events</span><span class='comma token'>,</span> <span class='rubyid_calculate_event_metrics identifier id'>calculate_event_metrics</span><span class='rparen token'>)</span>
  <span class='rubyid_@status ivar id'>@status</span> <span class='assign token'>=</span> <span class='rubyid_compute_status identifier id'>compute_status</span><span class='lparen token'>(</span><span class='rubyid_resource_metrics identifier id'>resource_metrics</span><span class='comma token'>,</span> <span class='rubyid_change_metric identifier id'>change_metric</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="initialize_from_hash-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>initialize_from_hash</strong>(data) &nbsp;<span class="private note title">private</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>



  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/transaction/report.rb', line 185</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_initialize_from_hash identifier id'>initialize_from_hash</span><span class='lparen token'>(</span><span class='rubyid_data identifier id'>data</span><span class='rparen token'>)</span>
  <span class='rubyid_@puppet_version ivar id'>@puppet_version</span> <span class='assign token'>=</span> <span class='rubyid_data identifier id'>data</span><span class='lbrack token'>[</span><span class='string val'>'puppet_version'</span><span class='rbrack token'>]</span>
  <span class='rubyid_@report_format ivar id'>@report_format</span> <span class='assign token'>=</span> <span class='rubyid_data identifier id'>data</span><span class='lbrack token'>[</span><span class='string val'>'report_format'</span><span class='rbrack token'>]</span>
  <span class='rubyid_@configuration_version ivar id'>@configuration_version</span> <span class='assign token'>=</span> <span class='rubyid_data identifier id'>data</span><span class='lbrack token'>[</span><span class='string val'>'configuration_version'</span><span class='rbrack token'>]</span>
  <span class='rubyid_@transaction_uuid ivar id'>@transaction_uuid</span> <span class='assign token'>=</span> <span class='rubyid_data identifier id'>data</span><span class='lbrack token'>[</span><span class='string val'>'transaction_uuid'</span><span class='rbrack token'>]</span>
  <span class='rubyid_@environment ivar id'>@environment</span> <span class='assign token'>=</span> <span class='rubyid_data identifier id'>data</span><span class='lbrack token'>[</span><span class='string val'>'environment'</span><span class='rbrack token'>]</span>
  <span class='rubyid_@status ivar id'>@status</span> <span class='assign token'>=</span> <span class='rubyid_data identifier id'>data</span><span class='lbrack token'>[</span><span class='string val'>'status'</span><span class='rbrack token'>]</span>
  <span class='rubyid_@host ivar id'>@host</span> <span class='assign token'>=</span> <span class='rubyid_data identifier id'>data</span><span class='lbrack token'>[</span><span class='string val'>'host'</span><span class='rbrack token'>]</span>
  <span class='rubyid_@time ivar id'>@time</span> <span class='assign token'>=</span> <span class='rubyid_data identifier id'>data</span><span class='lbrack token'>[</span><span class='string val'>'time'</span><span class='rbrack token'>]</span>
  <span class='rubyid_if if kw'>if</span> <span class='rubyid_@time ivar id'>@time</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span> <span class='rubyid_String constant id'>String</span>
    <span class='rubyid_@time ivar id'>@time</span> <span class='assign token'>=</span> <span class='rubyid_Time constant id'>Time</span><span class='dot token'>.</span><span class='rubyid_parse identifier id'>parse</span><span class='lparen token'>(</span><span class='rubyid_@time ivar id'>@time</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_@kind ivar id'>@kind</span> <span class='assign token'>=</span> <span class='rubyid_data identifier id'>data</span><span class='lbrack token'>[</span><span class='string val'>'kind'</span><span class='rbrack token'>]</span>

  <span class='rubyid_@metrics ivar id'>@metrics</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_data identifier id'>data</span><span class='lbrack token'>[</span><span class='string val'>'metrics'</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_hash identifier id'>hash</span><span class='bitor op'>|</span>
    <span class='rubyid_@metrics ivar id'>@metrics</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_Puppet constant id'>Puppet</span><span class='colon2 op'>::</span><span class='rubyid_Util constant id'>Util</span><span class='colon2 op'>::</span><span class='rubyid_Metric constant id'>Metric</span><span class='dot token'>.</span><span class='rubyid_from_pson identifier id'>from_pson</span><span class='lparen token'>(</span><span class='rubyid_hash identifier id'>hash</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_@logs ivar id'>@logs</span> <span class='assign token'>=</span> <span class='rubyid_data identifier id'>data</span><span class='lbrack token'>[</span><span class='string val'>'logs'</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_map identifier id'>map</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_record identifier id'>record</span><span class='bitor op'>|</span>
    <span class='rubyid_Puppet constant id'>Puppet</span><span class='colon2 op'>::</span><span class='rubyid_Util constant id'>Util</span><span class='colon2 op'>::</span><span class='rubyid_Log constant id'>Log</span><span class='dot token'>.</span><span class='rubyid_from_pson identifier id'>from_pson</span><span class='lparen token'>(</span><span class='rubyid_record identifier id'>record</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_@resource_statuses ivar id'>@resource_statuses</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_data identifier id'>data</span><span class='lbrack token'>[</span><span class='string val'>'resource_statuses'</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_map identifier id'>map</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_record identifier id'>record</span><span class='bitor op'>|</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_record identifier id'>record</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
      <span class='rubyid_status identifier id'>status</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span>
    <span class='rubyid_else else kw'>else</span>
      <span class='rubyid_status identifier id'>status</span> <span class='assign token'>=</span> <span class='rubyid_Puppet constant id'>Puppet</span><span class='colon2 op'>::</span><span class='rubyid_Resource constant id'>Resource</span><span class='colon2 op'>::</span><span class='rubyid_Status constant id'>Status</span><span class='dot token'>.</span><span class='rubyid_from_pson identifier id'>from_pson</span><span class='lparen token'>(</span><span class='rubyid_record identifier id'>record</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_@resource_statuses ivar id'>@resource_statuses</span><span class='lbrack token'>[</span><span class='rubyid_record identifier id'>record</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_status identifier id'>status</span>
  <span class='rubyid_end end kw'>end</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="name-instance_method">
  
    - (<tt><span class='object_link'>String</span></tt>) <strong>name</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the host name</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'>String</span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the host name</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


244
245
246</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/transaction/report.rb', line 244</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_name identifier id'>name</span>
  <span class='rubyid_host identifier id'>host</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="prune_internal_data-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>prune_internal_data</strong> &nbsp;<span class="private note title">private</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>



  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


151
152
153</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/transaction/report.rb', line 151</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_prune_internal_data identifier id'>prune_internal_data</span>
  <span class='rubyid_resource_statuses identifier id'>resource_statuses</span><span class='dot token'>.</span><span class='rubyid_delete_if identifier id'>delete_if</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span><span class='rubyid_res identifier id'>res</span><span class='bitor op'>|</span> <span class='rubyid_res identifier id'>res</span><span class='dot token'>.</span><span class='rubyid_resource_type identifier id'>resource_type</span> <span class='eq op'>==</span> <span class='string val'>'Whit'</span><span class='rbrace token'>}</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="raw_summary-instance_method">
  
    - (<tt><span class='object_link'>Hash</span>&lt;{<span class='object_link'>String</span> =&gt; <span class='object_link'>Object</span>}&gt;</tt>) <strong>raw_summary</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Provides a raw hash summary of this report.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'>Hash</span>&lt;{<span class='object_link'>String</span> =&gt; <span class='object_link'>Object</span>}&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A hash with metrics key to value map</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


283
284
285
286
287
288
289
290
291
292
293
294
295
296</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/transaction/report.rb', line 283</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_raw_summary identifier id'>raw_summary</span>
  <span class='rubyid_report identifier id'>report</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span> <span class='string val'>&quot;version&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrace token'>{</span> <span class='string val'>&quot;config&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_configuration_version identifier id'>configuration_version</span><span class='comma token'>,</span> <span class='string val'>&quot;puppet&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_Puppet constant id'>Puppet</span><span class='dot token'>.</span><span class='rubyid_version identifier id'>version</span>  <span class='rbrace token'>}</span> <span class='rbrace token'>}</span>

  <span class='rubyid_@metrics ivar id'>@metrics</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_metric identifier id'>metric</span><span class='bitor op'>|</span>
    <span class='rubyid_key identifier id'>key</span> <span class='assign token'>=</span> <span class='rubyid_metric identifier id'>metric</span><span class='dot token'>.</span><span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span>
    <span class='rubyid_report identifier id'>report</span><span class='lbrack token'>[</span><span class='rubyid_key identifier id'>key</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
    <span class='rubyid_metric identifier id'>metric</span><span class='dot token'>.</span><span class='rubyid_values identifier id'>values</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_label identifier id'>label</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='bitor op'>|</span>
      <span class='rubyid_report identifier id'>report</span><span class='lbrack token'>[</span><span class='rubyid_key identifier id'>key</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span>
    <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_report identifier id'>report</span><span class='lbrack token'>[</span><span class='rubyid_key identifier id'>key</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='string val'>&quot;total&quot;</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='integer val'>0</span> <span class='rubyid_unless unless_mod kw'>unless</span> <span class='rubyid_key identifier id'>key</span> <span class='eq op'>==</span> <span class='string val'>&quot;time&quot;</span> <span class='rubyid_or or kw'>or</span> <span class='rubyid_report identifier id'>report</span><span class='lbrack token'>[</span><span class='rubyid_key identifier id'>key</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_include? fid id'>include?</span><span class='lparen token'>(</span><span class='string val'>&quot;total&quot;</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>
  <span class='lparen token'>(</span><span class='rubyid_report identifier id'>report</span><span class='lbrack token'>[</span><span class='string val'>&quot;time&quot;</span><span class='rbrack token'>]</span> <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span><span class='lbrack token'>[</span><span class='string val'>&quot;last_run&quot;</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_Time constant id'>Time</span><span class='dot token'>.</span><span class='rubyid_now identifier id'>now</span><span class='dot token'>.</span><span class='rubyid_tv_sec identifier id'>tv_sec</span>
  <span class='rubyid_report identifier id'>report</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="summary-instance_method">
  
    - (<tt><span class='object_link'>String</span></tt>) <strong>summary</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'><p>This is intended for debugging purposes</p>
</div>
  </div>

<p>Provide a human readable textual summary of this report.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'>String</span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A string with a textual summary of this report.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/transaction/report.rb', line 253</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_summary identifier id'>summary</span>
  <span class='rubyid_report identifier id'>report</span> <span class='assign token'>=</span> <span class='rubyid_raw_summary identifier id'>raw_summary</span>

  <span class='rubyid_ret identifier id'>ret</span> <span class='assign token'>=</span> <span class='string val'>&quot;&quot;</span>
  <span class='rubyid_report identifier id'>report</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_sort identifier id'>sort</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='rubyid_a identifier id'>a</span><span class='comma token'>,</span><span class='rubyid_b identifier id'>b</span><span class='bitor op'>|</span> <span class='rubyid_a identifier id'>a</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span> <span class='cmp op'>&lt;=&gt;</span> <span class='rubyid_b identifier id'>b</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span> <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_key identifier id'>key</span><span class='bitor op'>|</span>
    <span class='rubyid_ret identifier id'>ret</span> <span class='opasgn op'>+=</span> <span class='dstring node'>&quot;#{Puppet::Util::Metric.labelize(key)}:\n&quot;</span>

    <span class='rubyid_report identifier id'>report</span><span class='lbrack token'>[</span><span class='rubyid_key identifier id'>key</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_sort identifier id'>sort</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='rubyid_a identifier id'>a</span><span class='comma token'>,</span><span class='rubyid_b identifier id'>b</span><span class='bitor op'>|</span>
      <span class='comment val'># sort by label</span>
      <span class='rubyid_if if kw'>if</span> <span class='rubyid_a identifier id'>a</span> <span class='eq op'>==</span> <span class='symbol val'>:total</span>
        <span class='integer val'>1</span>
      <span class='rubyid_elsif elsif kw'>elsif</span> <span class='rubyid_b identifier id'>b</span> <span class='eq op'>==</span> <span class='symbol val'>:total</span>
        <span class='integer val'>-1</span>
      <span class='rubyid_else else kw'>else</span>
        <span class='rubyid_report identifier id'>report</span><span class='lbrack token'>[</span><span class='rubyid_key identifier id'>key</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='rubyid_a identifier id'>a</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span> <span class='cmp op'>&lt;=&gt;</span> <span class='rubyid_report identifier id'>report</span><span class='lbrack token'>[</span><span class='rubyid_key identifier id'>key</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='rubyid_b identifier id'>b</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_label identifier id'>label</span><span class='bitor op'>|</span>
      <span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='rubyid_report identifier id'>report</span><span class='lbrack token'>[</span><span class='rubyid_key identifier id'>key</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='rubyid_label identifier id'>label</span><span class='rbrack token'>]</span>
      <span class='rubyid_next next kw'>next</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_value identifier id'>value</span> <span class='eq op'>==</span> <span class='integer val'>0</span>
      <span class='rubyid_value identifier id'>value</span> <span class='assign token'>=</span> <span class='string val'>&quot;%0.2f&quot;</span> <span class='mod op'>%</span> <span class='rubyid_value identifier id'>value</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='rubyid_Float constant id'>Float</span><span class='rparen token'>)</span>
      <span class='rubyid_ret identifier id'>ret</span> <span class='opasgn op'>+=</span> <span class='string val'>&quot;   %15s %s\n&quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_Puppet constant id'>Puppet</span><span class='colon2 op'>::</span><span class='rubyid_Util constant id'>Util</span><span class='colon2 op'>::</span><span class='rubyid_Metric constant id'>Metric</span><span class='dot token'>.</span><span class='rubyid_labelize identifier id'>labelize</span><span class='lparen token'>(</span><span class='rubyid_label identifier id'>label</span><span class='rparen token'>)</span> <span class='plus op'>+</span> <span class='string val'>&quot;:&quot;</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='rbrack token'>]</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_ret identifier id'>ret</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_yaml_properties-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>to_yaml_properties</strong> &nbsp;<span class="private note title">private</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>



  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


318
319
320</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/transaction/report.rb', line 318</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_to_yaml_properties identifier id'>to_yaml_properties</span>
  <span class='rubyid_super super kw'>super</span> <span class='minus op'>-</span> <span class='lbrack token'>[</span><span class='symbol val'>:@external_times</span><span class='rbrack token'>]</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Wed Feb 19 13:52:30 2014 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.3 (ruby-1.8.7).
</div>

  </body>
</html>